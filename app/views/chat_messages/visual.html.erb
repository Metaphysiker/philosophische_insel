<div class="container">
		<h1 class="text-center">Visual</h1>

		<div class="tree-container">

		</div>
</div>

<div id="kantian" style="width: 100px; visibility: hidden;">
		Epicness und so weiter
</div>

<script type="text/javascript">
	start();
	//functions
	function start(){
		//getData();
		drawTree(".tree-container");
	}

	function drawTree(container){
		return new Promise((resolve, reject) => {
		var width = $(container).width();
		var height = 500;
		var margin = {
			left: 10,
			right: 10,
			top: 10,
			bottom: 10,
		}

		var circle_radius = 10;

		// append the svg object to the body of the page
		 const svg = d3.select(container)
			 .append("svg")
			 .attr("width", width + margin.left + margin.right)
			 .attr("height", height + margin.top + margin.bottom)
			 .append("g")
			 .attr("transform", `translate(${width/2}, ${margin.top})`);

			 //append node
			 var node = svg.append("g");

			 //append circle
			 node.append('circle')
			  .attr('cx', 1)
			  .attr('cy', circle_radius)
			  .attr('r', circle_radius)
			  .attr('stroke', 'black')
			  .attr('fill', 'green');

			var foreignObject = node.append("foreignObject")
			    .attr("width", 100)
			    .attr("height", document.getElementById("kantian").getBoundingClientRect().height);
				   var div = foreignObject.append("xhtml:div")
				    .style("font", "20px 'Helvetica Neue'")
				    .style("color", "black")
						.style("text-align","center")
						.style("margin", "0px auto")
				    .html("this is line1<br>this is line2<br>this is line3");
			resolve();
		}) // end of Promise
	} // end drawTree

  function getData(){
		return new Promise((resolve, reject) => {

		$.ajax({
			//url: "< %= pferdefutter_data_donation_project_path(@donation_project) %>",
			method: 'GET'
		}).done(function( data ) {
			resolve(data);
		});

	})
} // end  getData
</script>
