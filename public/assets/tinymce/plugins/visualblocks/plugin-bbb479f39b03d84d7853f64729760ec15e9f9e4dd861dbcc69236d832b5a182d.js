!function(){"use strict";function t(t,o,e){var n,i;t.dom.toggleClass(t.getBody(),"mce-visualblocks"),e.set(!e.get()),n=t,i=e.get(),n.fire("VisualBlocks",{state:i})}function o(t,o){return function(e){function n(t){return e.setActive(t.state)}return e.setActive(o.get()),t.on("VisualBlocks",n),function(){return t.off("VisualBlocks",n)}}}tinymce.util.Tools.resolve("tinymce.PluginManager").add("visualblocks",function(e,n){function i(){return l.execCommand("mceVisualBlocks")}var s,c,u,l,a,r,f,g=(s=!1,{get:function(){return s},set:function(t){s=t}});u=g,(c=e).addCommand("mceVisualBlocks",function(){t(c,0,u)}),(l=e).ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:i,onSetup:o(l,a=g)}),l.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:i,onSetup:o(l,a)}),f=g,(r=e).on("PreviewFormats AfterPreviewFormats",function(t){f.get()&&r.dom.toggleClass(r.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)}),r.on("init",function(){r.getParam("visualblocks_default_state",!1,"boolean")&&t(r,0,f)})})}();