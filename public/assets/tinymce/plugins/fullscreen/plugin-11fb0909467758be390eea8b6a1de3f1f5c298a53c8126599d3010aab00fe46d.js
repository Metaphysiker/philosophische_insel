!function(){"use strict";function e(e){var n=e;return{get:function(){return n},set:function(e){n=e}}}function n(e){return function(n){return t=typeof(r=n),(null===r?"null":"object"==t&&(Array.prototype.isPrototypeOf(r)||r.constructor&&"Array"===r.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(r)||r.constructor&&"String"===r.constructor.name)?"string":t)===e;var r,t}}function r(e){return function(n){return typeof n===e}}function t(e){return!(null==e)}function o(){}function i(e){return function(){return e}}function u(e){return e}function c(){return Z}function a(e){return e()}function s(n){function r(){return t.get().each(n)}var t=e(ne.none());return{clear:function(){r(),t.set(ne.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(e){r(),t.set(ne.some(e))}}}function l(){return s((function(e){return e.unbind()}))}function f(e,n){for(var r=e.length,t=new Array(r),o=0;o<r;o++){var i=e[o];t[o]=n(i,o)}return t}function m(e,n){for(var r=0,t=e.length;r<t;r++)n(e[r],r)}function d(e,n){for(var r=[],t=0,o=e.length;t<o;t++){var i=e[t];n(i,t)&&r.push(i)}return r}function h(e,n){return function(e,n,r){for(var t=0,o=e.length;t<o;t++){var i=e[t];if(n(i,t))return ne.some(i);if(r(i,t))break}return ne.none()}(e,n,J)}function v(e,n){return-1!==e.indexOf(n)}function g(e){return void 0!==e.style&&Y(e.style.getPropertyValue)}function p(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function w(e){return function(n){return n.dom.nodeType===e}}function y(e,n){return function(n){for(var r=0;r<n.length;r++){var t=function(n){var r=n.brand.toLowerCase();return h(e,(function(e){var n;return r===(null===(n=e.brand)||void 0===n?void 0:n.toLowerCase())})).map((function(e){return{current:e.name,version:he.nu(parseInt(n.version,10),0)}}))}(n[r]);if(t.isSome())return t}return ne.none()}(n.brands)}function b(e,n){var r=String(n).toLowerCase();return h(e,(function(e){return e.search(r)}))}function S(e){return function(n){return v(n,e)}}function x(e){return window.matchMedia(e).matches}function E(e,n){var r=e.dom;if(1!==r.nodeType)return!1;var t=r;if(void 0!==t.matches)return t.matches(n);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(n);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(n);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function O(e){return ie.fromDom(e.dom.ownerDocument)}function F(e){var n,r=Re(e);return me(n=r)&&t(n.dom.host)?ne.some(r):ne.none()}function T(e){return ie.fromDom(e.dom.host)}function k(e,n,r){!function(e,n,r){if(!(U(r)||K(r)||G(r)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")}(e.dom,n,r)}function C(e,n){var r=e.dom.getAttribute(n);return null===r?void 0:r}function D(e,n){e.dom.removeAttribute(n)}function A(e,n){var r=e.dom;!function(e){for(var n,t=oe(e),o=0,i=t.length;o<i;o++){var u=t[o];n=e[u],function(e,n,r){if(!U(r))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);g(e)&&e.style.setProperty(n,r)}(r,u,n)}}(n)}function R(e){function n(){return e.stopPropagation()}function r(){return e.preventDefault()}var o,i,u=ie.fromDom(function(e){if(Ae()&&t(e.target)){var n=ie.fromDom(e.target);if(se(n)&&Le(n)&&e.composed&&e.composedPath){var r=e.composedPath();if(r)return 0<(o=r).length?ne.some(o[0]):ne.none()}}var o;return ne.from(e.target)}(e).getOr(e.target)),c=(o=r,i=n,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o(i.apply(null,e))});return{target:u,x:e.clientX,y:e.clientY,stop:n,prevent:r,kill:c,raw:e}}function L(e,n,r){return o=n,i=!1,u=He,c=r,a=function(e){u(e)&&c(R(e))},(t=e).dom.addEventListener(o,a,i),{unbind:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var o=n.concat(r);return e.apply(null,o)}}(Ne,t,o,a,i)};var t,o,i,u,c,a}function P(e){var n=void 0===e?window:e;return ke().browser.isFirefox()?ne.none():ne.from(n.visualViewport)}function M(e,n,r,t){return{x:e,y:n,width:r,height:t,right:e+r,bottom:n+t}}function N(e,n,r){return P(r).map((function(r){function t(e){return n(R(e))}return r.addEventListener(e,t),{unbind:function(){return r.removeEventListener(e,t)}}})).getOrThunk((function(){return{unbind:o}}))}function H(e,n){e.fire("FullscreenStateChanged",{state:n})}function W(e){return e.getParam("fullscreen_native",!1,"boolean")}function q(e){return e.dom===(void 0!==(n=O(e).dom).fullscreenElement?n.fullscreenElement:void 0!==n.msFullscreenElement?n.msFullscreenElement:void 0!==n.webkitFullscreenElement?n.webkitFullscreenElement:null);var n}function I(e,n){return t=function(e){return E(e,n)},d((r=e,ne.from(r.dom.parentNode).map(ie.fromDom).map(Ce).map((function(e){return d(e,(function(e){return r.dom!==e.dom}))})).getOr([])),t);var r,t}function j(e,n,r){function t(n){return function(r){var t=C(r,"style"),o=void 0===t?"no-styles":t.trim();o===n||(k(r,Ve,o),A(r,e.parseStyle(n)))}}var o,i,u,c,a,s,l=(s=function(e){return E(e,"*")},d(function(e,n){for(var r=Y(n)?n:J,t=e.dom,o=[];null!==t.parentNode&&void 0!==t.parentNode;){var i=t.parentNode,u=ie.fromDom(i);if(o.push(u),!0===r(u))break;t=i}return o}(n,void 0),s)),h=function(e){for(var n=[],r=0,t=e.length;r<t;++r){if(!$(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);te.apply(n,e[r])}return n}(f(l,(function(e){return I(e,"*:not(.tox-silver-sink)")}))),v=(i="background-color",u=(o=r).dom,void 0!==(a=""!==(c=window.getComputedStyle(u).getPropertyValue(i))||Pe(o)?c:Me(u,i))&&""!==a?"background-color:"+a+"!important":"background-color:rgb(255,255,255)!important;");m(h,t("display:none!important;")),m(l,t(Xe+_e+v)),t((!0===ze?"":Xe)+_e+v)(n)}function B(e,n){return function(r){function t(e){return r.setActive(e.state)}return r.setActive(null!==n.get()),e.on("FullscreenStateChanged",t),function(){return e.off("FullscreenStateChanged",t)}}}function V(){return de(0,0)}function X(e){function n(e){return function(){return r===e}}var r=e.current,t=e.version;return{current:r,version:t,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(pe),isSafari:n("Safari")}}function _(e){function n(e){return function(){return r===e}}var r=e.current,t=e.version;return{current:r,version:t,isWindows:n(be),isiOS:n("iOS"),isAndroid:n(Se),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(xe),isFreeBSD:n(Ee),isChromeOS:n(Oe)}}var z=tinymce.util.Tools.resolve("tinymce.PluginManager"),U=n("string"),$=n("array"),K=r("boolean"),Y=r("function"),G=r("number"),J=i(!1),Q=i(!0),Z={fold:function(e){return e()},isSome:J,isNone:Q,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:u,orThunk:a,map:c,each:o,bind:c,exists:J,forall:Q,filter:function(){return Z},toArray:function(){return[]},toString:i("none()")},ee=function(e){function n(){return o}function r(n){return n(e)}var t=i(e),o={fold:function(n,r){return r(e)},isSome:Q,isNone:J,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(n){return ee(n(e))},each:function(n){n(e)},bind:r,exists:r,forall:r,filter:function(n){return n(e)?o:Z},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},ne={some:ee,none:c,from:function(e){return null==e?Z:ee(e)}},re=function(){return(re=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},te=Array.prototype.push,oe=Object.keys,ie={fromHtml:function(e,n){var r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return p(r.childNodes[0])},fromTag:function(e,n){return p((n||document).createElement(e))},fromText:function(e,n){return p((n||document).createTextNode(e))},fromDom:p,fromPoint:function(e,n,r){return ne.from(e.dom.elementFromPoint(n,r)).map(p)}};"undefined"!=typeof window||Function("return this;")();var ue,ce,ae,se=w(1),le=w(3),fe=w(9),me=w(11),de=function(e,n){return{major:e,minor:n}},he={nu:de,detect:function(e,n){function r(e){return Number(t.replace(o,"$"+e))}var t,o,i=String(n).toLowerCase();return 0===e.length?V():(o=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}}(e,t=i))?de(r(1),r(2)):{major:0,minor:0}},unknown:V},ve=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ge={browsers:i([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return v(e,"edge/")&&v(e,"chrome")&&v(e,"safari")&&v(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ve],search:function(e){return v(e,"chrome")&&!v(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return v(e,"msie")||v(e,"trident")}},{name:"Opera",versionRegexes:[ve,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:S("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:S("firefox")},{name:"Safari",versionRegexes:[ve,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(v(e,"safari")||v(e,"mobile/"))&&v(e,"applewebkit")}}]),oses:i([{name:"Windows",search:S("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return v(e,"iphone")||v(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:S("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:S("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:S("linux"),versionRegexes:[]},{name:"Solaris",search:S("sunos"),versionRegexes:[]},{name:"FreeBSD",search:S("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:S("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},pe="Firefox",we=function(){return X({current:void 0,version:he.unknown()})},ye=X,be=(i("Edge"),i("Chrome"),i("IE"),i("Opera"),i(pe),i("Safari"),"Windows"),Se="Android",xe="Solaris",Ee="FreeBSD",Oe="ChromeOS",Fe=function(){return _({current:void 0,version:he.unknown()})},Te=_,ke=(i(be),i("iOS"),i(Se),i("Linux"),i("OSX"),i(xe),i(Ee),i(Oe),ae=!(ue=function(){return e=navigator.userAgent,n=ne.from(navigator.userAgentData),r=x,g=ge.browsers(),p=ge.oses(),w=n.bind((function(e){return y(g,e)})).orThunk((function(){return b(g,n=e).map((function(e){var r=he.detect(e.versionRegexes,n);return{current:e.name,version:r}}));var n})).fold(we,ye),S=b(p,t=e).map((function(e){var n=he.detect(e.versionRegexes,t);return{current:e.name,version:n}})).fold(Fe,Te),{browser:w,os:S,deviceType:(u=w,c=e,a=r,s=(o=S).isiOS()&&!0===/ipad/i.test(c),l=o.isiOS()&&!s,m=(f=o.isiOS()||o.isAndroid())||a("(pointer:coarse)"),d=s||!l&&f&&a("(min-device-width:768px)"),h=l||f&&!d,v=u.isSafari()&&o.isiOS()&&!1===/safari/i.test(c),{isiPad:i(s),isiPhone:i(l),isTablet:i(d),isPhone:i(h),isTouch:i(m),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:i(v),isDesktop:i(!h&&!d&&!v)})};var e,n,r,t,o,u,c,a,s,l,f,m,d,h,v,g,p,w,S}),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ae||(ae=!0,ce=ue.apply(null,e)),ce}),Ce=function(e){return f(e.dom.childNodes,ie.fromDom)},De=Y(Element.prototype.attachShadow)&&Y(Node.prototype.getRootNode),Ae=i(De),Re=De?function(e){return ie.fromDom(e.dom.getRootNode())}:function(e){return fe(e)?e:O(e)},Le=function(e){return t(e.dom.shadowRoot)},Pe=function(e){var n=le(e)?e.dom.parentNode:e.dom;if(null==n||null===n.ownerDocument)return!1;var r,t,o=n.ownerDocument;return F(ie.fromDom(n)).fold((function(){return o.body.contains(n)}),(r=Pe,t=T,function(e){return r(t(e))}))},Me=function(e,n){return g(e)?e.style.getPropertyValue(n):""},Ne=function(e,n,r,t){e.dom.removeEventListener(n,r,t)},He=Q,We=function(e,n){return{left:e,top:n,translate:function(r,t){return We(e+r,n+t)}}},qe=We,Ie=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),je=tinymce.util.Tools.resolve("tinymce.Env"),Be=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ve="data-ephox-mobile-fullscreen-style",Xe="position:absolute!important;",_e="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",ze=je.os.isAndroid(),Ue=Ie.DOM,$e=P().fold((function(){return{bind:o,unbind:o}}),(function(e){var n,r=(n=s(o),re(re({},n),{on:function(e){return n.get().each(e)}})),t=l(),i=l(),u=Be.throttle((function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((function(){r.on((function(n){return A(n,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})}))}))}),50);return{bind:function(e){r.set(e),u(),t.set(N("resize",u)),i.set(N("scroll",u))},unbind:function(){r.on((function(){t.clear(),i.clear()})),r.clear()}}})),Ke=function(e,n){function r(e){e(b,"tox-fullscreen"),e(S,"tox-fullscreen"),e(x,"tox-fullscreen"),F(E).map((function(e){return T(e).dom})).each((function(n){e(n,"tox-fullscreen"),e(n,"tox-shadowhost")}))}function t(){var t,o,i,u;I&&(t=e.dom,o="["+Ve+"]",m(1!==(i=u=document).nodeType&&9!==i.nodeType&&11!==i.nodeType||0===i.childElementCount?[]:f(u.querySelectorAll(o),ie.fromDom),(function(e){var n=C(e,Ve);"no-styles"!==n?A(e,t.parseStyle(n)):D(e,"style"),D(e,Ve)}))),r(Ue.removeClass),$e.unbind(),ne.from(n.get()).each((function(e){return e.fullscreenChangeHandler.unbind()}))}var o,i,u,c,a,s,l,d,h,v,g,p,w,y,b=document.body,S=document.documentElement,x=e.getContainer(),E=ie.fromDom(x),k=F(s=ie.fromDom(e.getElement())).map(T).getOrThunk((function(){var e=O(s).dom.body;if(null==e)throw new Error("Body is not available yet");return ie.fromDom(e)})),R=n.get(),N=ie.fromDom(e.getBody()),I=je.deviceType.isTouch(),B=x.style,V=e.iframeElement.style;R?(R.fullscreenChangeHandler.unbind(),W(e)&&q(k)&&((c=O(k).dom).exitFullscreen?c.exitFullscreen():c.msExitFullscreen?c.msExitFullscreen():c.webkitCancelFullScreen&&c.webkitCancelFullScreen()),V.width=R.iframeWidth,V.height=R.iframeHeight,B.width=R.containerWidth,B.height=R.containerHeight,B.top=R.containerTop,B.left=R.containerLeft,u=R.scrollPos,window.scrollTo(u.x,u.y),n.set(null),H(e,!1),t(),e.off("remove",t)):(o=L(O(k),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(function(){W(e)&&(q(k)||null===n.get()||Ke(e,n))})),i={scrollPos:(l=window,p=void 0===l?window:l,w=p.document,v=(h=void 0!==(d=ie.fromDom(w))?d.dom:document).body.scrollLeft||h.documentElement.scrollLeft,g=h.body.scrollTop||h.documentElement.scrollTop,y=qe(v,g),P(p).fold((function(){var e=p.document.documentElement,n=e.clientWidth,r=e.clientHeight;return M(y.left,y.top,n,r)}),(function(e){return M(Math.max(e.pageLeft,y.left),Math.max(e.pageTop,y.top),e.width,e.height)}))),containerWidth:B.width,containerHeight:B.height,containerTop:B.top,containerLeft:B.left,iframeWidth:V.width,iframeHeight:V.height,fullscreenChangeHandler:o},I&&j(e.dom,E,N),V.width=V.height="100%",B.width=B.height="",r(Ue.addClass),$e.bind(E),e.on("remove",t),n.set(i),W(e)&&((a=k.dom).requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen()),H(e,!0))};z.add("fullscreen",(function(n){function r(){return i.execCommand("mceFullScreen")}var t,o,i,u,c,a=e(null);return n.inline||(o=a,(t=n).addCommand("mceFullScreen",(function(){Ke(t,o)})),(i=n).ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:r,onSetup:B(i,u=a)}),i.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:r,onSetup:B(i,u)}),n.addShortcut("Meta+Shift+F","","mceFullScreen")),c=a,{isFullscreen:function(){return null!==c.get()}}}))}();