!function(){"use strict";function e(e){return function(n){return r=typeof(t=n),(null===t?"null":"object"==r&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":r)===e;var t,r}}function n(e){return function(n){return typeof n===e}}function t(e){return function(n){return e===n}}function r(e){return!(null==e)}function o(){}function u(e){return function(){return e}}function i(e){return e}function c(e,n){return e===n}function l(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=n.concat(t);return e.apply(null,o)}}function a(e){return function(n){return!e(n)}}function f(){return ul}function s(e){return e()}function m(e,n){return-1<al.call(e,n)}function d(e,n){for(var t=0,r=e.length;r>t;t++)if(n(e[t],t))return!0;return!1}function g(e,n){for(var t=[],r=0;e>r;r++)t.push(n(r));return t}function p(e,n){for(var t=e.length,r=new Array(t),o=0;t>o;o++){var u=e[o];r[o]=n(u,o)}return r}function b(e,n){for(var t=0,r=e.length;r>t;t++)n(e[t],t)}function h(e,n){for(var t=[],r=[],o=0,u=e.length;u>o;o++){var i=e[o];(n(i,o)?t:r).push(i)}return{pass:t,fail:r}}function v(e,n){for(var t=[],r=0,o=e.length;o>r;r++){var u=e[r];n(u,r)&&t.push(u)}return t}function w(e,n,t){return function(e){for(var r,o=e.length-1;o>=0;o--)r=e[o],t=n(t,r,o)}(e),t}function y(e,n,t){return b(e,function(e,r){t=n(t,e,r)}),t}function C(e,n){return function(e,n,t){for(var r=0,o=e.length;o>r;r++){var u=e[r];if(n(u,r))return cl.some(u);if(t(u,r))break}return cl.none()}(e,n,rl)}function S(e,n){for(var t=0,r=e.length;r>t;t++)if(n(e[t],t))return cl.some(t);return cl.none()}function T(e){for(var n=[],t=0,r=e.length;r>t;++t){if(!Jc(e[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+e);fl.apply(n,e[t])}return n}function x(e,n){return T(p(e,n))}function R(e,n){for(var t=0,r=e.length;r>t;++t)if(!0!==n(e[t],t))return!1;return!0}function D(e,n){for(var t={},r=0,o=e.length;o>r;r++){var u=e[r];t[String(u)]=n(u,r)}return t}function O(e){return[e]}function A(e,n){return n>=0&&n<e.length?cl.some(e[n]):cl.none()}function k(e){return A(e,0)}function I(e){return A(e,e.length-1)}function B(e,n){for(var t=0;t<e.length;t++){var r=n(e[t],t);if(r.isSome())return r}return cl.none()}function M(e,n,t){if(t||2===arguments.length)for(var r,o=0,u=n.length;u>o;o++)!r&&o in n||((r=r||Array.prototype.slice.call(n,0,o))[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}function E(e){var n,t=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t||(t=!0,n=e.apply(null,r)),n}}function P(e,n){var t=String(n).toLowerCase();return C(e,function(e){return e.search(t)})}function N(e,n,t){return""===n||e.length>=n.length&&e.substr(t,t+n.length)===n}function z(e,n){return-1!==e.indexOf(n)}function L(e,n){return N(e,n,e.length-n.length)}function _(e){return 0<e.length}function W(e){return function(n){return z(n,e)}}function j(e){return window.matchMedia(e).matches}function F(e,n){var t=e.dom;if(1!==t.nodeType)return!1;var r=t;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function H(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount}function V(e,n){var t=void 0===n?document:n.dom;return H(t)?cl.none():cl.from(t.querySelector(e)).map(kl.fromDom)}function q(e,n){return e.dom===n.dom}function U(e,n){return Al().browser.isIE()?(t=e.dom,r=n.dom,o=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(t.compareDocumentPosition(r)&o)):(u=e.dom)!==(i=n.dom)&&u.contains(i);var t,r,o,u,i}function G(e,n){for(var t=Bl(e),r=0,o=t.length;o>r;r++){var u=t[r];n(e[u],u)}}function $(e,n){return El(e,function(e,t){return{k:t,v:n(e,t)}})}function K(e,n){var t={},r=n,u=t,i=function(e,n){u[n]=e},c=o;return G(e,function(e,n){(r(e,n)?i:c)(e,n)}),t}function X(e,n){var t=[];return G(e,function(e,r){t.push(n(e,r))}),t}function Y(e){return X(e,i)}function J(e){return Bl(e).length}function Q(e,n){return Pl(e,n)?cl.from(e[n]):cl.none()}function Z(e,n){return Pl(e,n)&&void 0!==e[n]&&null!==e[n]}function ee(e,n,t){return{element:e,rowspan:n,colspan:t}}function ne(e,n,t){return{element:e,cells:n,section:t}}function te(e,n,t){return{element:e,isNew:n,isLocked:t}}function re(e,n,t,r){return{element:e,cells:n,section:t,isNew:r}}function oe(){return ml(0,0)}function ue(e){function n(e){return function(){return t===e}}var t=e.current,r=e.version;return{current:t,version:r,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(vl),isSafari:n("Safari")}}function ie(e){function n(e){return function(){return t===e}}var t=e.current,r=e.version;return{current:t,version:r,isWindows:n(Cl),isiOS:n("iOS"),isAndroid:n(Sl),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(Tl),isFreeBSD:n(xl),isChromeOS:n(Rl)}}function ce(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function le(e){return e.dom.nodeName.toLowerCase()}function ae(e){return e.dom.nodeType}function fe(e){return function(n){return ae(n)===e}}function se(e){return 8===ae(e)||"#comment"===le(e)}function me(e){return function(n){return Fl(n)&&le(n)===e}}function de(e){return kl.fromDom(e.dom.ownerDocument)}function ge(e){return Vl(e)?e:de(e)}function pe(e){return cl.from(e.dom.parentNode).map(kl.fromDom)}function be(e,n){for(var t=nl(n)?n:rl,r=e.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=kl.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o}function he(e){return cl.from(e.dom.previousSibling).map(kl.fromDom)}function ve(e){return cl.from(e.dom.nextSibling).map(kl.fromDom)}function we(e){return p(e.dom.childNodes,kl.fromDom)}function ye(e,n){var t=e.dom.childNodes;return cl.from(t[n]).map(kl.fromDom)}function Ce(e){return kl.fromDom(e.dom.host)}function Se(e,n,t){return r=function(e){return F(e,n)},v(be(e,t),r);var r}function Te(e,n){return t=function(e){return F(e,n)},v(we(e),t);var t}function xe(e,n){return H(t=void 0===e?document:e.dom)?[]:p(t.querySelectorAll(n),kl.fromDom);var t}function Re(e,n,t,r,o){return e(t,r)?cl.some(t):nl(o)&&o(t)?cl.none():n(t,r,o)}function De(e,n,t){for(var r=e.dom,o=nl(t)?t:rl;r.parentNode;){var r=r.parentNode,u=kl.fromDom(r);if(n(u))return cl.some(u);if(o(u))break}return cl.none()}function Oe(e,n,t){return De(e,function(e){return F(e,n)},t)}function Ae(e,n){return t=function(e){return F(e,n)},C(e.dom.childNodes,function(e){return t(kl.fromDom(e))}).map(kl.fromDom);var t}function ke(e,n){return V(n,e)}function Ie(e,n,t){return Re(F,Oe,e,n,t)}function Be(e,n,t){if(!(Xc(t)||Zc(t)||tl(t)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",t,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,t+"")}function Me(e,n,t){Be(e.dom,n,t)}function Ee(e,n){var t=e.dom;G(n,function(e,n){Be(t,n,e)})}function Pe(e,n){var t=e.dom.getAttribute(n);return null===t?void 0:t}function Ne(e,n){return cl.from(Pe(e,n))}function ze(e){return y(e.dom.attributes,function(e,n){return e[n.name]=n.value,e},{})}function Le(e,n,t){return void 0===t&&(t=c),e.exists(function(e){return t(e,n)})}function _e(e){for(var n=[],t=function(e){n.push(e)},r=0;r<e.length;r++)e[r].each(t);return n}function We(e,n,t){return e.isSome()&&n.isSome()?cl.some(t(e.getOrDie(),n.getOrDie())):cl.none()}function je(e,n){return e?cl.some(n):cl.none()}function Fe(e){return void 0!==e.style&&nl(e.style.getPropertyValue)}function He(e,n,t){if(!Xc(t))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",t,":: Element ",e),new Error("CSS value must be a string: "+t);Fe(e)&&e.style.setProperty(n,t)}function Ve(e,n,t){He(e.dom,n,t)}function qe(e,n){var t=e.dom;G(n,function(e,n){He(t,n,e)})}function Ue(e,n){var t=e.dom,r=window.getComputedStyle(t).getPropertyValue(n);return""!==r||Xl(e)?r:Zl(t,n)}function Ge(e,n){var t=e.dom,r=Zl(t,n);return cl.from(r).filter(function(e){return 0<e.length})}function $e(e,n){var t,r=n;Fe(t=e.dom)&&t.style.removeProperty(r),Le(Ne(e,"style").map(pl),"")&&Ql(e,"style")}function Ke(e,n,t){return void 0===t&&(t=0),Ne(e,n).map(function(e){return parseInt(e,10)}).getOr(t)}function Xe(e,n){return Ke(e,n,1)}function Ye(e){return me("col")(e)?1<Ke(e,"span",1):1<Xe(e,"colspan")}function Je(e){return 1<Xe(e,"rowspan")}function Qe(e,n){return parseInt(Ue(e,n),10)}function Ze(e,n){return ta(e,n,ol)}function en(e,n){return t=["td","th"],(o=void 0===(o=n)?rl:n)(r=e)?cl.none():m(t,le(r))?cl.some(r):Oe(r,t.join(","),function(e){return F(e,"table")||o(e)});var t,r,o}function nn(e){return Ze(e,"th,td")}function tn(e){return F(e,"colgroup")?Te(e,"col"):x(ra(e),function(e){return Te(e,"col")})}function rn(e,n){return Ie(e,"table",n)}function on(e){return Ze(e,"tr")}function un(e,n){return p(e,function(e){if("colgroup"!==le(e))return ne(e,t=p(nn(e),function(e){return ee(e,Ke(e,"rowspan",1),Ke(e,"colspan",1))}),n(e));var t=p(tn(e),function(e){return ee(e,1,Ke(e,"span",1))});return ne(e,t,"colgroup")})}function cn(e){return pe(e).map(function(e){var n=le(e);return m(Nl,n)?n:"tbody"}).getOr("tbody")}function ln(e){var n=on(e);return un(M(M([],ra(e),!0),n,!0),cn)}function an(e,n,t){var r=e.cells,o=r.slice(0,n),u=r.slice(n),i=o.concat(t).concat(u);return oa(e,i)}function fn(e,n,t){return an(e,n,[t])}function sn(e,n,t){e.cells[n]=t}function mn(e,n){return e.cells[n]}function dn(e,n){return mn(e,n).element}function gn(e){return e.cells.length}function pn(e){var n=h(e,function(e){return"colgroup"===e.section});return{rows:n.fail,cols:n.pass}}function bn(e,n,t){var r=p(e.cells,t);return re(n(e.element),r,e.section,!0)}function hn(e){return Ne(e,ua).bind(function(e){return cl.from(e.match(/\d+/g))}).map(function(e){return D(e,ol)})}function vn(e){var n,t=X(y(pn(e).rows,function(e,n){return b(n.cells,function(n,t){n.isLocked&&(e[t]=!0)}),e},{}),function(e,n){return parseInt(n,10)});return(n=ll.call(t,0)).sort(void 0),n}function wn(e){var n={},t=[],r=k(e).map(function(e){return e.element}).bind(rn).bind(hn).getOr({}),o=0,u=0,i=0,c=h(e,function(e){return"colgroup"===e.section}),l=c.pass;b(c.fail,function(e){var c=[];b(e.cells,function(e){for(var t=0;void 0!==n[i+","+t];)t++;for(var o=Z(r,t.toString()),l={element:e.element,rowspan:e.rowspan,colspan:e.colspan,row:i,column:t,isLocked:o},a=0;a<e.colspan;a++)for(var f=0;f<e.rowspan;f++){var s=t+a;n[i+f+","+s]=l,u=Math.max(u,s+1)}c.push(l)}),o++,t.push(ne(e.element,c,e.section)),i++});var a=I(l).map(function(e){var n,t,r=(n={},t=0,b(e.cells,function(e){var r=e.colspan;g(r,function(o){var u=t+o;n[u]={element:e.element,colspan:r,column:u}}),t+=r}),n);return{colgroups:[{element:e.element,columns:Y(r)}],columns:r}}).getOrThunk(function(){return{colgroups:[],columns:{}}}),f=a.columns,s=a.colgroups;return{grid:{rows:o,columns:u},access:n,all:t,columns:f,colgroups:s}}function yn(e,n){var t=n.column,r=n.column+n.colspan-1,o=n.row,u=n.row+n.rowspan-1;return t<=e.finishCol&&r>=e.startCol&&o<=e.finishRow&&u>=e.startRow}function Cn(e,n){return n.column>=e.startCol&&n.column+n.colspan-1<=e.finishCol&&n.row>=e.startRow&&n.row+n.rowspan-1<=e.finishRow}function Sn(e,n,t){var r=ia.findItem(e,n,q),o=ia.findItem(e,t,q);return r.bind(function(e){return o.map(function(n){return t=e,r=n,{startRow:Math.min(t.row,r.row),startCol:Math.min(t.column,r.column),finishRow:Math.max(t.row+t.rowspan-1,r.row+r.rowspan-1),finishCol:Math.max(t.column+t.colspan-1,r.column+r.colspan-1)};var t,r})})}function Tn(e,n,t){return Sn(e,n,t).map(function(n){return p(ia.filterItems(e,l(yn,n)),function(e){return e.element})})}function xn(e,n){return ia.findItem(e,n,function(e,n){return U(n,e)}).map(function(e){return e.element})}function Rn(e,n,t,r,o){var u=ca(e),i=q(e,t)?cl.some(n):xn(u,n),c=q(e,o)?cl.some(r):xn(u,r);return i.bind(function(e){return c.bind(function(n){return Tn(u,e,n)})})}function Dn(e,n){pe(e).each(function(t){t.dom.insertBefore(n.dom,e.dom)})}function On(e,n){ve(e).fold(function(){pe(e).each(function(e){la(e,n)})},function(e){Dn(e,n)})}function An(e,n){ye(e,0).fold(function(){la(e,n)},function(t){e.dom.insertBefore(n.dom,t.dom)})}function kn(e,n){Dn(e,n),la(n,e)}function In(e,n){b(n,function(t,r){On(0===r?e:n[r-1],t)})}function Bn(e,n){b(n,function(n){la(e,n)})}function Mn(e){e.dom.textContent="",b(we(e),function(e){aa(e)})}function En(e){var n,t=we(e);0<t.length&&(n=e,b(t,function(e){Dn(n,e)})),aa(e)}function Pn(e){return fa.get(e)}function Nn(e){return fa.getOption(e)}function zn(e,n){return fa.set(e,n)}function Ln(e,n){return v(x(e.all,function(e){return e.cells}),n)}function _n(){return{up:u({selector:Oe,closest:Ie,predicate:De,all:be}),down:u({selector:xe,predicate:Jl}),styles:u({get:Ue,getRaw:Ge,set:Ve,remove:$e}),attrs:u({get:Pe,set:Me,remove:Ql,copyTo:function(e,n){Ee(n,ze(e))}}),insert:u({before:Dn,after:On,afterAll:In,append:la,appendAll:Bn,prepend:An,wrap:kn}),remove:u({unwrap:En,remove:aa}),create:u({nu:kl.fromTag,clone:function(e){return kl.fromDom(e.dom.cloneNode(!1))},text:kl.fromText}),query:u({comparePosition:function(e,n){return e.dom.compareDocumentPosition(n.dom)},prevSibling:he,nextSibling:ve}),property:u({children:we,name:le,parent:pe,document:function(e){return ge(e).dom},isText:Hl,isComment:se,isElement:Fl,isSpecial:function(e){return m(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],le(e))},getLanguage:function(e){return Fl(e)?Ne(e,"lang"):cl.none()},getText:Pn,setText:zn,isBoundary:function(e){return!!Fl(e)&&("body"===le(e)||m(sa,le(e)))},isEmptyTag:function(e){return!!Fl(e)&&m(["br","img","hr","input"],le(e))},isNonEditable:function(e){return Fl(e)&&"false"===Pe(e,"contenteditable")}}),eq:q,is:Il}}function Wn(e,n){return da(pa,function(n,t){return e(t)},n)}function jn(e){return Oe(e,"table")}function Fn(e,n,t){function r(e){return function(n){return void 0!==t&&t(n)||q(n,e)}}return q(e,n)?cl.some({boxes:cl.some([e]),start:e,finish:n}):jn(e).bind(function(o){return jn(n).bind(function(u){if(q(o,u))return cl.some({boxes:(a=e,f=n,Tn(ca(o),a,f)),start:e,finish:n});if(U(o,u)){var i=0<(c=Se(n,"td,th",r(o))).length?c[c.length-1]:n;return cl.some({boxes:Rn(o,e,o,n,u),start:e,finish:i})}if(U(u,o)){var c,l=0<(c=Se(e,"td,th",r(u))).length?c[c.length-1]:e;return cl.some({boxes:Rn(u,e,o,n,u),start:e,finish:l})}return ga(pa,e,n,void 0).shared.bind(function(i){return Ie(i,"table",t).bind(function(t){var i=Se(n,"td,th",r(t)),c=0<i.length?i[i.length-1]:n,l=Se(e,"td,th",r(t)),a=0<l.length?l[l.length-1]:e;return cl.some({boxes:Rn(t,e,o,n,u),start:a,finish:c})})});var a,f})})}function Hn(e,n){var t=xe(e,n);return 0<t.length?cl.some(t):cl.none()}function Vn(e,n,t){return ke(e,n).bind(function(n){return ke(e,t).bind(function(e){return Wn(jn,[n,e]).map(function(t){return{first:n,last:e,table:t}})})})}function qn(e,n,t,r,o){return u=o,C(e,function(e){return F(e,u)}).bind(function(e){return u=n,i=t,rn(o=e).bind(function(e){var n=ca(e),t=u,r=i;return ia.findItem(n,o,q).bind(function(e){var o=t>0?e.row+e.rowspan-1:e.row,u=r>0?e.column+e.colspan-1:e.column;return ia.getAt(n,o+t,u+r).map(function(e){return e.element})})}).bind(function(e){return t=r,Oe(n=e,"table").bind(function(e){return ke(e,t).bind(function(e){return Fn(e,n).bind(function(e){return e.boxes.map(function(n){return{boxes:n,start:e.start,finish:e.finish}})})})});var n,t});var o,u,i});var u}function Un(e,n,t){return Vn(e,n,t).bind(function(n){function t(n){return q(e,n)}var r="thead,tfoot,tbody,table",o=Oe(n.first,r,t),u=Oe(n.last,r,t);return o.bind(function(e){return u.bind(function(t){return q(e,t)?(o=n.table,u=n.first,i=n.last,c=ca(o),Sn(r=c,u,i).bind(function(e){return function(e,n){for(var t=!0,r=l(Cn,n),o=n.startRow;o<=n.finishRow;o++)for(var u=n.startCol;u<=n.finishCol;u++)t=t&&ia.getAt(e,o,u).exists(r);return t?cl.some(n):cl.none()}(r,e)})):cl.none();var r,o,u,i,c})})})}function Gn(e,n,t,r){return e.fold(n,t,r)}function $n(e,n){return kl.fromDom(e.dom.cloneNode(n))}function Kn(e){return $n(e,!1)}function Xn(e){return $n(e,!0)}function Yn(e,n){var t=kl.fromTag(n);return Ee(t,ze(e)),t}function Jn(e,n){function t(t){var r=n(t);if(0>=r||null===r){var o=Ue(t,e);return parseFloat(o)||0}return r}function r(e,n){return y(n,function(n,t){var r=Ue(e,t),o=void 0===r?0:parseInt(r,10);return isNaN(o)?n:n+o},0)}return{set:function(n,t){if(!tl(t)&&!t.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+t);var r=n.dom;Fe(r)&&(r.style[e]=t+"px")},get:t,getOuter:t,aggregate:r,max:function(e,n,t){var o=r(e,t);return n>o?n-o:0}}}function Qn(){var e=Al().browser;return e.isIE()||e.isEdge()}function Zn(e,n,t){return r=Ue(e,n),o=t,u=parseFloat(r),(isNaN(u)?cl.none():cl.some(u)).getOr(o);var r,o,u}function et(e){return Ue(e,"box-sizing")}function nt(e,n,t,r){return n-Zn(e,"padding-"+t,0)-Zn(e,"padding-"+r,0)-Zn(e,"border-"+t+"-width",0)-Zn(e,"border-"+r+"-width",0)}function tt(e,n){var t=e.dom,r=t.getBoundingClientRect().width||t.offsetWidth;return"border-box"===n?r:nt(e,r,"left","right")}function rt(e){return Sa.get(e)}function ot(e){return Sa.getOuter(e)}function ut(e,n){void 0===n&&(n=ol);var t=e.grid,r=g(t.columns,i),o=g(t.rows,i);return p(r,function(t){return Ra(function(){return x(o,function(n){return ia.getAt(e,n,t).filter(function(e){return e.column===t}).toArray()})},function(e){return 1===e.colspan&&n(e.element)},function(){return ia.getAt(e,0,t)})})}function it(e){var n=e.grid,t=g(n.rows,i),r=g(n.columns,i);return p(t,function(n){return Ra(function(){return x(r,function(t){return ia.getAt(e,n,t).filter(function(e){return e.row===n}).fold(u([]),function(e){return[e]})})},function(e){return 1===e.rowspan},function(){return ia.getAt(e,n,0)})})}function ct(e,n){return function(t){return"rtl"===Da(t)?n:e}}function lt(e){return Oa.get(e)}function at(e){return Oa.getOuter(e)}function ft(e,n){return void 0!==e?e:void 0!==n?n:0}function st(e){var n=e.dom.ownerDocument,t=n.body,r=n.defaultView,o=n.documentElement;if(t===e.dom)return Ia(t.offsetLeft,t.offsetTop);var u=ft(null==r?void 0:r.pageYOffset,o.scrollTop),i=ft(null==r?void 0:r.pageXOffset,o.scrollLeft),c=ft(o.clientTop,t.clientTop),l=ft(o.clientLeft,t.clientLeft);return Ba(e).translate(i-l,u-c)}function mt(e,n){return{row:e,y:n}}function dt(e,n){return{col:e,x:n}}function gt(e){return st(e).left+ot(e)}function pt(e){return st(e).left}function bt(e,n){return dt(e,pt(n))}function ht(e,n){return dt(e,gt(n))}function vt(e){return st(e).top}function wt(e,n){return mt(e,vt(n))}function yt(e,n){return mt(e,vt(n)+at(n))}function Ct(e,n,t){if(0===t.length)return[];var r=p(t.slice(1),function(n,t){return n.map(function(n){return e(t,n)})}),o=t[t.length-1].map(function(e){return n(t.length-1,e)});return r.concat([o])}function St(e){if(!Jc(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var n=[],t={};return b(e,function(r,o){var u=Bl(r);if(1!==u.length)throw new Error("one and only one name per case");var i=u[0],c=r[i];if(void 0!==t[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!Jc(c))throw new Error("case arguments must be an array");n.push(i),t[i]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var u=t.length;if(u!==c.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+c.length+" ("+c+"), got "+u);return{fold:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(n.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+n.length);return n[o].apply(null,t)},match:function(e){var r=Bl(e);if(n.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+r.join(","));if(!R(n,function(e){return m(r,e)}))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+n.join(", "));return e[i].apply(null,t)},log:function(e){console.log(e,{constructors:n,constructor:i,params:t})}}}}),t}function Tt(e){return"(?:"+e+")?"}function xt(e,n,t){var r=cl.from(e.dom.parentElement).map(kl.fromDom).getOrThunk(function(){return Yl(de(e))});return n(e)/t(r)*100}function Rt(e,n){Ve(e,"width",n+"px")}function Dt(e,n){Ve(e,"width",n+"%")}function Ot(e,n){Ve(e,"height",n+"px")}function At(e){var n,t,r,o,u,i,c,l,a,f,s=Aa(e)+"px";return s?(n=s,t=e,r=lt,o=Ot,f=parseFloat(n),L(n,"%")&&"table"!==le(t)?(i=f,c=r,l=o,a=rn(u=t).map(function(e){var n=c(e);return Math.floor(i/100*n)}).getOr(i),l(u,a),a):f):lt(e)}function kt(e,n){return Ge(e,n).orThunk(function(){return Ne(e,n).map(function(e){return e+"px"})})}function It(e){return kt(e,"width")}function Bt(e){return xt(e,rt,Ta)}function Mt(e){return(Wa(e)?rt:xa)(e)}function Et(e){return At(n=e)/Xe(n,"rowspan");var n}function Pt(e,n,t){Ve(e,"width",n+t)}function Nt(e){return xt(e,rt,Ta)+"%"}function zt(e){return It(e).getOrThunk(function(){return Mt(e)+"px"})}function Lt(e){return kt(e,"height").getOrThunk(function(){return Et(e)+"px"})}function _t(e,n,t,r,o,u){return e.filter(r).fold(function(){return u(function(e,n){if(0>n||n>=e.length-1)return cl.none();var t=e[n].fold(function(){var t,r;return B((t=e.slice(0,n),(r=ll.call(t,0)).reverse(),r),function(e,n){return e.map(function(e){return{value:e,delta:n+1}})})},function(e){return cl.some({value:e,delta:0})}),r=e[n+1].fold(function(){return B(e.slice(n+1),function(e,n){return e.map(function(e){return{value:e,delta:n+1}})})},function(e){return cl.some({value:e,delta:1})});return t.bind(function(e){return r.map(function(n){var t=n.delta+e.delta;return Math.abs(n.value-e.value)/t})})}(t,n))},function(e){return o(e)})}function Wt(e,n,t,r){var o=ut(e),u=ia.hasColumns(e)?p(ia.justColumns(e),function(e){return cl.from(e.element)}):o,c=[cl.some(Pa.edge(n))].concat(p(Pa.positions(o,n),function(e){return e.map(function(e){return e.x})})),l=a(Ye);return p(u,function(e,n){return _t(e,n,c,l,function(e){return a=e,s=(f=Al().browser).isChrome()||f.isFirefox(),!Fa(a)||s?t(e):_t(null!=(u=o[n])?i(u):cl.none(),n,c,l,function(e){return r(cl.some(rt(e)))},r);var u,a,f,s},r)})}function jt(e){return e.map(function(e){return e+"px"}).getOr("")}function Ft(e,n,t){return Wt(e,n,Mt,function(e){return e.getOrThunk(t.minCellWidth)})}function Ht(e,n,t,r,o){var u=it(e),i=[cl.some(t.edge(n))].concat(p(t.positions(u,n),function(e){return e.map(function(e){return e.y})}));return p(u,function(e,n){return _t(e,n,i,a(Je),r,o)})}function Vt(e,n){return function(){return Xl(e)?n(e):parseFloat(Ge(e,"width").getOr("0"))}}function qt(e){var n=Vt(e,function(e){return parseFloat(Nt(e))}),t=Vt(e,rt);return{width:n,pixelWidth:t,getWidths:function(n,t){return r=t,Wt(n,e,Bt,function(e){return e.fold(function(){return r.minCellWidth()},function(e){return e/r.pixelWidth()*100})});var r},getCellDelta:function(e){return e/t()*100},singleColumnWidth:function(e,n){return[100-e]},minCellWidth:function(){return ea()/t()*100},setElementWidth:Dt,adjustTableWidth:function(t){var r=n();Dt(e,r+t/100*r)},isRelative:!0,label:"percent"}}function Ut(e){var n=Vt(e,rt);return{width:n,pixelWidth:n,getWidths:function(n,t){return Ft(n,e,t)},getCellDelta:i,singleColumnWidth:function(e,n){return[Math.max(ea(),e+n)-e]},minCellWidth:ea,setElementWidth:Rt,adjustTableWidth:function(t){var r=n()+t;Rt(e,r)},isRelative:!1,label:"pixel"}}function Gt(e,n){function t(e){return F(e.element,n)}var r,o,u,i,c,l,a,f,s,m,d,g,p=Xn(e),h=ln(p),w=Ha(e),C=ia.generate(h),S=(r=t,o=C.grid.columns,u=C.grid.rows,i=o,l=c=0,a=[],f=[],G(C.access,function(e){var n,t,o,s;a.push(e),r(e)&&(f.push(e),t=(n=e.row)+e.rowspan-1,s=(o=e.column)+e.colspan-1,u>n?u=n:t>c&&(c=t),i>o?i=o:s>l&&(l=s))}),{minRow:u,minCol:i,maxRow:c,maxCol:l,allCells:a,selectedCells:f}),T="th:not("+n+"),td:not("+n+")";return b(ta(p,"th,td",function(e){return F(e,T)}),aa),function(e,n,t,r){for(var o,u,i,c=n.grid.columns,l=n.grid.rows,a=0;l>a;a++)for(var f=!1,s=0;c>s;s++)a<t.minRow||a>t.maxRow||s<t.minCol||s>t.maxCol||(ia.getAt(n,a,s).filter(r).isNone()?(o=f,u=e[a].element,i=kl.fromTag("td"),la(i,kl.fromTag("br")),(o?la:An)(u,i)):f=!0)}(h,C,S,t),s=p,m=S,d=C,g=function(e,n,t,r){if(0===r.minCol&&n.grid.columns===r.maxCol+1)return 0;var o=Ft(n,e,t),u=y(o,function(e,n){return e+n},0),i=y(o.slice(r.minCol,r.maxCol+1),function(e,n){return e+n},0)/u*t.pixelWidth()-t.pixelWidth();return t.getCellDelta(i)}(e,ia.fromTable(e),w,S),G(d.columns,function(e){(e.column<m.minCol||e.column>m.maxCol)&&aa(e.element)}),b(v(Ze(s,"tr"),function(e){return 0===e.dom.childElementCount}),aa),m.minCol!==m.maxCol&&m.minRow!==m.maxRow||b(Ze(s,"th,td"),function(e){Ql(e,"rowspan"),Ql(e,"colspan")}),Ql(s,ua),Ql(s,"data-snooker-col-series"),Ha(s).adjustTableWidth(g),p}function $t(e){return"img"===le(e)?1:Nn(e).fold(function(){return we(e).length},function(e){return e.length})}function Kt(e){return Nn(e).filter(function(e){return 0!==e.trim().length||-1<e.indexOf("\xa0")}).isSome()||m(Ua,le(e))}function Xt(e){return n=Kt,(t=function(e){for(var r=0;r<e.childNodes.length;r++){var o=kl.fromDom(e.childNodes[r]);if(n(o))return cl.some(o);var u=t(e.childNodes[r]);if(u.isSome())return u}return cl.none()})(e.dom);var n,t}function Yt(e){return Ga(e,Kt)}function Jt(e){return function(){var n=kl.fromTag("td",e.dom);return la(n,kl.fromTag("br",e.dom)),n}}function Qt(e){return function(){return kl.fromTag("col",e.dom)}}function Zt(e){return function(){return kl.fromTag("colgroup",e.dom)}}function er(e){return function(){return kl.fromTag("tr",e.dom)}}function nr(e,n,t){var r,o,u=(Bn(o=Yn(r=e,n),we(Xn(r))),o);return G(t,function(e,n){null===e?Ql(u,n):Me(u,n,e)}),u}function tr(e){return e}function rr(e,n,t){function r(e,n){var t=e.element.dom,r=n.dom;Fe(t)&&Fe(r)&&(r.style.cssText=t.style.cssText),$e(n,"height"),1!==e.colspan&&$e(n,"width")}return{col:function(t){var o=kl.fromTag(le(t.element),n.dom);return r(t,o),e(t.element,o),o},colgroup:Zt(n),row:er(n),cell:function(o){var u,i,c,l,a,f=kl.fromTag(le(o.element),n.dom),s=t.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),d=0<s.length?(u=o.element,i=f,c=s,Xt(u).map(function(e){return w(Se(e,c.join(","),function(e){return q(e,u)}),function(e,n){var t=Kn(n);return Ql(t,"contenteditable"),la(e,t),t},i)}).getOr(i)):f;return la(d,kl.fromTag("br")),r(o,f),l=o.element,a=f,G($a,function(e,n){return Ne(l,n).filter(function(n){return m(e,n)}).each(function(e){return Me(a,n,e)})}),e(o.element,f),f},replace:nr,colGap:Qt(n),gap:Jt(n)}}function or(e){return{col:Qt(e),colgroup:Zt(e),row:er(e),cell:Jt(e),replace:tr,colGap:Qt(e),gap:Jt(e)}}function ur(e){return p(e,kl.fromDom)}function ir(e){return kl.fromDom(e.getBody())}function cr(e){return e.getBoundingClientRect().width}function lr(e){return e.getBoundingClientRect().height}function ar(e){return function(n){return q(n,ir(e))}}function fr(e){return/^\d+(\.\d+)?$/.test(e)?e+"px":e}function sr(e){function n(e){return Ql(e,"data-mce-style")}Ql(e,"data-mce-style"),b(nn(e),n),b(tn(e),n),b(on(e),n)}function mr(e){return kl.fromDom(e.selection.getStart())}function dr(e){return Gn(e.get(),u([]),i,O)}function gr(e,n,t){function r(e,n){return Ne(e,n).exists(function(e){return 1<parseInt(e,10)})}return{element:t,mergable:(u=n,i=Ka,Gn(e.get(),cl.none,function(e){return e.length<=1?cl.none():Un(u,i.firstSelectedSelector,i.lastSelectedSelector).map(function(n){return{bounds:n,cells:e}})},cl.none)),unmergable:0<(o=dr(e)).length&&R(o,function(e){return r(e,"rowspan")||r(e,"colspan")})?cl.some(o):cl.none(),selection:dr(e)};var o,u,i}function pr(e){return function(n,t){var r,o=le(n);return Ie("col"===o||"colgroup"===o?rn(r=n).bind(function(e){return ba(e,Ka.firstSelectedSelector)}).fold(u(r),function(e){return e[0]}):n,e,t)}}function br(e,n,t){e.on("BeforeGetContent",function(t){!0===t.selection&&Gn(n.get(),o,function(n){t.preventDefault(),rn(n[0]).map(function(e){var n=Gt(e,"[data-mce-selected]");return sr(n),[n]}).each(function(n){var r;t.content="text"===t.format?p(n,function(e){return e.dom.innerText}).join(""):(r=e,p(n,function(e){return r.selection.serializer.serialize(e.dom,{})}).join(""))})},o)}),e.on("BeforeSetContent",function(r){!0===r.selection&&!0===r.paste&&k(Ja(n)).each(function(n){rn(n).each(function(o){var u,i,c,l,a=v((u=r.content,(i=document.createElement("div")).innerHTML=u,we(kl.fromDom(i))),function(e){return"meta"!==le(e)}),f=me("table");1===a.length&&f(a[0])&&(r.preventDefault(),c=or(kl.fromDom(e.getDoc())),l={element:n,clipboard:a[0],generators:c},t.pasteCells(o,l).each(function(){e.focus()}))})})})}function hr(e,n,t){for(var r=0,o=e;n>o;o++)r+=void 0!==t[o]?t[o]:0;return r}function vr(e,n,t){var r,o,u,i;b((r=e,o=n,ia.hasColumns(r)?(i=o,p(ia.justColumns(r),function(e,n){return{element:e.element,width:i[n],colspan:e.colspan}})):(u=o,p(ia.justCells(r),function(e){var n=hr(e.column,e.column+e.colspan,u);return{element:e.element,width:n,colspan:e.colspan}}))),function(e){t.setElementWidth(e.element,e.width)})}function wr(e,n,t,r,o){var i,c,l,a,f,s,m,d,g,b,h=ia.fromTable(e),v=o.getCellDelta(n),w=o.getWidths(h,o),y=t===h.grid.columns-1,C=r.clampTableDelta(w,t,v,o.minCellWidth(),y),S=(c=t,l=C,a=o,f=r,d=(i=w).slice(0),m=c,g=0===(s=i).length?Za.none():1===s.length?Za.only(0):0===m?Za.left(0,1):m===s.length-1?Za.right(m-1,m):m>0&&m<s.length-1?Za.middle(m-1,m,m+1):Za.none(),b=u(p(d,u(0))),g.fold(b,function(e){return a.singleColumnWidth(d[e],l)},function(e,n){return f.calcLeftEdgeDeltas(d,e,n,l,a.minCellWidth(),a.isRelative)},function(e,n,t){return f.calcMiddleDeltas(d,e,n,t,l,a.minCellWidth(),a.isRelative)},function(e,n){return f.calcRightEdgeDeltas(d,e,n,l,a.minCellWidth(),a.isRelative)}));vr(h,p(S,function(e,n){return e+w[n]}),o),r.resizeTable(o.adjustTableWidth,C,y)}function yr(e){return p(e,u(0))}function Cr(e,n,t,r,o){return o(e.slice(0,n)).concat(r).concat(o(e.slice(t)))}function Sr(e){return function(n,t,r,o){if(e(r)){var u=Math.max(o,n[t]-Math.abs(r)),i=Math.abs(u-n[t]);return r>=0?i:-i}return r}}function Tr(){function e(e,n,t,r){var o=(100+t)/100,u=Math.max(r,(e[n]+t)/o);return p(e,function(e,t){return(t===n?u:e/o)-e})}function n(n,t,r,o,u,i){return i?e(n,t,o,u):(a=r,f=ef(c=n,l=t,o,u),Cr(c,l,a+1,[f,0],yr));var c,l,a,f}return{resizeTable:function(e,n){return e(n)},clampTableDelta:ef,calcLeftEdgeDeltas:n,calcMiddleDeltas:function(e,t,r,o,u,i,c){return n(e,r,o,u,i,c)},calcRightEdgeDeltas:function(n,t,r,o,u,i){if(i)return e(n,r,o,u);var c=ef(n,r,o,u);return yr(n.slice(0,r)).concat([c])},calcRedestributedWidths:function(e,n,t,r){if(r){var o=(n+t)/n,u=p(e,function(e){return e/o});return{delta:100*o-100,newSizes:u}}return{delta:t,newSizes:e}}}}function xr(){function e(e,n,t,r,o){var u=nf(e,r>=0?t:n,r,o);return Cr(e,n,t+1,[u,-u],yr)}return{resizeTable:function(e,n,t){t&&e(n)},clampTableDelta:function(e,n,t,r,o){if(o){if(t>=0)return t;var u=y(e,function(e,n){return e+n-r},0);return Math.max(-u,t)}return ef(e,n,t,r)},calcLeftEdgeDeltas:e,calcMiddleDeltas:function(n,t,r,o,u,i){return e(n,r,o,u,i)},calcRightEdgeDeltas:function(e,n,t,r,o,i){return i?yr(e):p(e,u(r/e.length))},calcRedestributedWidths:function(e,n,t,r){return{delta:0,newSizes:e}}}}function Rr(e,n,t){var r=t.substring(0,t.length-e.length),o=parseFloat(r);return r===o.toString()?n(o):tf.invalid(t)}function Dr(e,n,t){var r,o,i,c,l=rf.from(t),a=R(e,function(e){return"0px"===e})?(r=e.length,o=l.fold(function(){return u("")},function(e){return u(e/r+"px")},function(){return u(100/r+"%")}),g(r,o)):(i=e,c=n,l.fold(function(){return i},function(e){return t=(n=e)/c,p(i,function(e){return rf.from(e).fold(function(){return e},function(e){return e*t+"px"},function(e){return e/100*n+"px"})});var n,t},function(e){return n=c,p(i,function(e){return rf.from(e).fold(function(){return e},function(e){return e/n*100+"%"},function(e){return e+"%"})});var n}));return of(a)}function Or(e,n){return 0===e.length?n:w(e,function(e,n){return rf.from(n).fold(u(0),i,i)+e},0)}function Ar(e){return uf(e).fold(u("px"),u("px"),u("%"))}function kr(e,n,t){var r=ia.fromTable(e),o=r.all,u=ia.justCells(r),i=ia.justColumns(r);n.each(function(n){var t,o,c,l,a=Ar(n),f=rt(e),s=Dr(Wt(r,e,zt,jt),f,n);ia.hasColumns(r)?(c=s,l=a,b(i,function(e,n){var t=Or([c[n]],ea());Ve(e.element,"width",t+l)})):(t=s,o=a,b(u,function(e){var n=Or(t.slice(e.column,e.colspan+e.column),ea());Ve(e.element,"width",n+o)})),Ve(e,"width",n)}),t.each(function(n){var t=Ar(n),i=lt(e),c=Dr(Ht(r,e,Ma,Lt,jt),i,n),l=o,a=t;b(u,function(e){var n=Or(c.slice(e.row,e.rowspan+e.row),na());Ve(e.element,"height",n+a)}),b(l,function(e,n){Ve(e.element,"height",c[n])}),Ve(e,"height",n);
})}function Ir(e){return ia.fromTable(e).grid}function Br(e){var n=[];return{bind:function(e){if(void 0===e)throw new Error("Event bind error: undefined handler");n.push(e)},unbind:function(e){n=v(n,function(n){return n!==e})},trigger:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o={};b(e,function(e,n){o[e]=t[n]}),b(n,function(e){e(o)})}}}function Mr(e){return{registry:$(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:$(e,function(e){return e.trigger})}}function Er(e){return e.slice(0).sort()}function Pr(e,n){var t=v(n,function(n){return!m(e,n)});0<t.length&&function(){throw new Error("Unsupported keys for object: "+Er(t).join(", "))}()}function Nr(e){return function(e,n,t){if(0===n.length)throw new Error("You must specify at least one required field.");var r;return function(e,n){if(!Jc(n))throw new Error("The "+e+" fields must be an array. Was: "+n+".");b(n,function(n){if(!Xc(n))throw new Error("The value "+n+" in the "+e+" fields was not a string.")})}("required",n),C(r=Er(n),function(e,n){return n<r.length-1&&e===r[n+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+r.join(", ")+"].")}),function(r){var o=Bl(r);R(n,function(e){return m(o,e)})||function(e,n){throw new Error("All required keys ("+Er(e).join(", ")+") were not specified. Specified keys were: "+Er(n).join(", ")+".")}(n,o),e(n,o);var u=v(n,function(e){return!t.validate(r[e],e)});return 0<u.length&&function(e,n){throw new Error("All values need to be of type: "+n+". Keys ("+Er(e).join(", ")+") were not.")}(u,t.label),r}}(Pr,e,{validate:nl,label:"function"})}function zr(){var e,n,t={onEvent:o,reset:o,events:Mr({move:Br(["info"])}).registry},r=(e=cl.none(),{onEvent:function(t,r){r.extract(t).each(function(t){var o=r,u=t,i=e.map(function(e){return o.compare(e,u)});e=cl.some(u),i.each(function(e){n.trigger.move(e)})})},reset:function(){e=cl.none()},events:(n=Mr({move:Br(["info"])})).registry}),u=t;return{on:function(){u.reset(),u=r},off:function(){u.reset(),u=t},isOn:function(){return u===r},onEvent:function(e,n){u.onEvent(e,n)},events:r.events}}function Lr(e){function n(){return e.stopPropagation()}function t(){return e.preventDefault()}var o,u,i=kl.fromDom(function(e){if(Gl()&&r(e.target)){var n=kl.fromDom(e.target);if(Fl(n)&&Kl(n)&&e.composed&&e.composedPath){var t=e.composedPath();if(t)return k(t)}}return cl.from(e.target)}(e).getOr(e.target)),c=(o=t,u=n,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o(u.apply(null,e))});return{target:i,x:e.clientX,y:e.clientY,stop:n,prevent:t,kill:c,raw:e}}function _r(e,n,t){return o=n,u=!1,i=sf,c=t,a=function(e){i(e)&&c(Lr(e))},(r=e).dom.addEventListener(o,a,u),{unbind:l(ff,r,o,a,u)};var r,o,u,i,c,a}function Wr(e){return void 0!==e.dom.classList}function jr(e,n){return o=n,Me(e,t="class",(void 0===(r=Pe(e,t))||""===r?[]:r.split(" ")).concat([o]).join(" ")),1;var t,r,o}function Fr(e,n){Wr(e)?e.dom.classList.add(n):jr(e,n)}function Hr(e,n){return Wr(e)&&e.dom.classList.contains(n)}function Vr(e){var n=e.replace(/\./g,"-");return{resolve:function(e){return n+"-"+e}}}function qr(e){return Ie(e,"[contenteditable]")}function Ur(e,n){return void 0===n&&(n=!1),!Al().browser.isIE()&&Xl(e)?e.dom.isContentEditable:qr(e).fold(u(n),function(e){return"true"===pf(e)})}function Gr(e){b(xe(e.parent(),"."+hf),aa)}function $r(e,n,t){var r=e.origin();b(n,function(n){n.each(function(n){var o=t(r,n);Fr(o,hf),la(e.parent(),o)})})}function Kr(e,n,t,r,o){var u,i,c,l,a,f=st(t),s=n.isResizable,m=0<r.length?Ma.positions(r,t):[],p=0<m.length?(u=s,x(e.all,function(e,n){return u(e.element)?[n]:[]})):[],b=v(m,function(e,n){return d(p,function(e){return n===e})});i=n,c=b,l=f,a=ot(t),$r(i,c,function(e,n){var t,r,o,u,i,c=(t=n.row,r=l.left-e.left,o=n.y-e.top,u=a,qe(i=kl.fromTag("div"),{position:"absolute",left:r+"px",top:o-3.5+"px",height:"7px",width:u+"px"}),Ee(i,{"data-row":t,role:"presentation"}),i);return Fr(c,vf),c});var h,w,y,C,S,T,D,O=0<o.length?Pa.positions(o,t):[],A=0<O.length?(w=s,y=[],g((h=e).grid.columns,function(e){ia.getColumnAt(h,e).map(function(e){return e.element}).forall(w)&&y.push(e)}),v(y,function(e){return R(ia.filterItems(h,function(n){return n.column===e}),function(e){return w(e.element)})})):[],k=v(O,function(e,n){return d(A,function(e){return n===e})});C=n,S=k,T=f,D=at(t),$r(C,S,function(e,n){var t,r,o,u,i,c=(t=n.col,r=n.x-e.left,o=T.top-e.top,u=D,qe(i=kl.fromTag("div"),{position:"absolute",left:r-3.5+"px",top:o+"px",height:u+"px",width:"7px"}),Ee(i,{"data-column":t,role:"presentation"}),i);return Fr(c,wf),c})}function Xr(e,n){var t;Gr(e),e.isResizable(n)&&Kr(t=ia.fromTable(n),e,n,it(t),ut(t))}function Yr(e,n){b(xe(e.parent(),"."+hf),n)}function Jr(e){Yr(e,function(e){Ve(e,"display","none")})}function Qr(e){Yr(e,function(e){Ve(e,"display","block")})}function Zr(e){function n(e,n){return cl.from(Pe(e,n))}function t(e,n){return Qe(e,n)-Ke(e,"data-initial-"+n,0)}function r(n,t){h.trigger.startAdjust(),m.assign(n),Me(n,"data-initial-"+t,Qe(n,t)),Fr(n,yf),Ve(n,"opacity","0.2"),d.go(e.parent())}function o(n){return q(n,e.view())}var u,i,c,a,f,s,m=(a=Mr({drag:Br(["xDelta","yDelta","target"])}),f=cl.none(),(s={mutate:function(e,n){c.trigger.drag(e,n)},events:(c=Mr({drag:Br(["xDelta","yDelta"])})).registry}).events.drag.bind(function(e){f.each(function(n){a.trigger.drag(e.xDelta,e.yDelta,n)})}),{assign:function(e){f=cl.some(e)},get:function(){return f},mutate:s.mutate,events:a.registry}),d=(i=void 0!==(u={}).mode?u.mode:gf,function(e,n,t){function r(){m.stop(),f.isOn()&&(f.off(),a.trigger.stop())}function o(){Qc(c)||(clearTimeout(c),c=null)}function u(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];l&&e.apply(null,n)}}var i,c,l=!1,a=Mr({start:Br([]),stop:Br([])}),f=zr(),s=(i=r,c=null,{cancel:o,throttle:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];o(),c=setTimeout(function(){c=null,i.apply(null,e)},200)}});f.events.move.bind(function(t){n.mutate(e,t.info)});var m=n.sink(af({forceDrop:r,drop:u(r),move:u(function(e){s.cancel(),f.onEvent(e,n)}),delayDrop:u(s.throttle)}),t);return{element:m.element,go:function(e){m.start(e),f.on(),a.trigger.start()},on:function(){l=!0},off:function(){l=!1},destroy:function(){m.destroy()},events:a.registry}}(m,i,u)),g=cl.none();m.events.drag.bind(function(e){n(e.target,"data-row").each(function(n){var t=Qe(e.target,"top");Ve(e.target,"top",t+e.yDelta+"px")}),n(e.target,"data-column").each(function(n){var t=Qe(e.target,"left");Ve(e.target,"left",t+e.xDelta+"px")})}),d.events.stop.bind(function(){m.get().each(function(r){g.each(function(o){n(r,"data-row").each(function(e){var n=t(r,"top");Ql(r,"data-initial-top"),h.trigger.adjustHeight(o,n,parseInt(e,10))}),n(r,"data-column").each(function(e){var n=t(r,"left");Ql(r,"data-initial-left"),h.trigger.adjustWidth(o,n,parseInt(e,10))}),Xr(e,o)})})});var p=_r(e.parent(),"mousedown",function(e){Hr(e.target,vf)&&r(e.target,"top"),Hr(e.target,wf)&&r(e.target,"left")}),b=_r(e.view(),"mouseover",function(n){Ie(n.target,"table",o).filter(Ur).fold(function(){Xl(n.target)&&Gr(e)},function(n){g=cl.some(n),Xr(e,n)})}),h=Mr({adjustHeight:Br(["table","delta","row"]),adjustWidth:Br(["table","delta","column"]),startAdjust:Br([])});return{destroy:function(){p.unbind(),b.unbind(),d.destroy(),Gr(e)},refresh:function(n){Xr(e,n)},on:d.on,off:d.off,hideBars:l(Jr,e),showBars:l(Qr,e),events:h.registry}}function eo(e,n){return e.fire("newrow",{node:n})}function no(e,n){return e.fire("newcell",{node:n})}function to(e,n,t){e.fire("TableModified",sl(sl({},t),{table:n}))}function ro(e){return e.getParam("table_sizing_mode","auto")}function oo(e){return e.getParam("table_responsive_width")}function uo(e){return e.getParam("table_border_widths",Rf,"array")}function io(e){return e.getParam("table_border_styles",Df,"array")}function co(e){return e.getParam("table_default_attributes",Of,"object")}function lo(e){return e.getParam("table_default_styles",function(e){var n;if(kf(e)){var t=e.dom,r=null!==(n=t.getParent(e.selection.getStart(),t.isBlock))&&void 0!==n?n:e.getBody(),o=Ta(kl.fromDom(r));return sl(sl({},xf),{width:o+"px"})}return If(e)?K(xf,function(e,n){return"width"!==n}):xf}(e),"object")}function ao(e){return e.getParam("table_cell_advtab",!0,"boolean")}function fo(e){return e.getParam("table_row_advtab",!0,"boolean")}function so(e){return e.getParam("table_advtab",!0,"boolean")}function mo(e){return e.getParam("table_style_by_css",!1,"boolean")}function go(e){return e.getParam("table_cell_class_list",[],"array")}function po(e){return e.getParam("table_class_list",[],"array")}function bo(e){return"relative"===ro(e)||!0===oo(e)}function ho(e){var n="section",t=e.getParam("table_header_type",n,"string");return m(["section","cells","sectionCells","auto"],t)?t:n}function vo(e){var n=e.getParam("table_column_resizing",Af,"string");return C(["preservetable","resizetable"],function(e){return e===n}).getOr(Af)}function wo(e){return"preservetable"===vo(e)}function yo(e){return"resizetable"===vo(e)}function Co(e){var n=e.getParam("table_clone_elements");return Xc(n)?cl.some(n.split(/[ ,]/)):Array.isArray(n)?cl.some(n):cl.none()}function So(e){return e.getParam("table_background_color_map",[],"array")}function To(e){return e.getParam("table_border_color_map",[],"array")}function xo(e,n){return(bo(e)?qa:kf(e)?Va:Ha)(n)}function Ro(e){Ql(e,"width")}function Do(e){return"false"!==Pe(e,"data-mce-resize")}function Oo(e){function n(e){return"TABLE"===e.nodeName}function t(n){return xo(e,n)}function r(){return(wo(e)?xr:Tr)()}var o,i,c=cl.none(),l=cl.none(),a=cl.none();return e.on("init",function(){var n,o,i,f,s,m,d,g,h,v,y,C,S,T,x=(o=Do,(n=e).inline?(m=ir(n),qe(g=kl.fromTag("div"),{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),la(Yl(kl.fromDom(document)),g),d=o,{parent:u(g),view:u(m),origin:u(Ia(0,0)),isResizable:d}):Fi(kl.fromDom(n.getDoc()),o));a=cl.some(x),s=e.getParam("object_resizing",!0),(Xc(s)?"table"===s:s)&&e.getParam("table_resize_bars",!0,"boolean")&&(i=r(),h=i,v=t,y=Ma,C=Pa,S=Zr(x),T=Mr({beforeResize:Br(["table","type"]),afterResize:Br(["table","type"]),startDrag:Br([])}),S.events.adjustHeight.bind(function(e){var n=e.table;T.trigger.beforeResize(n,"row");var t,r,o,u,i,c,l,a,f,s=y.delta(e.delta,n);t=n,r=s,o=e.row,u=y,l=ia.fromTable(t),a=p(Ht(l,t,u,Et,function(e){return e.getOrThunk(na)}),function(e,n){return o===n?Math.max(r+e,na()):e}),i=a,f=p(ia.justCells(l),function(e){var n=hr(e.row,e.row+e.rowspan,i);return{element:e.element,height:n,rowspan:e.rowspan}}),b((c=a,p(l.all,function(e,n){return{element:e.element,height:c[n]}})),function(e){Ot(e.element,e.height)}),b(f,function(e){Ot(e.element,e.height)}),Ot(t,w(a,function(e,n){return e+n},0)),T.trigger.afterResize(n,"row")}),S.events.startAdjust.bind(function(e){T.trigger.startDrag()}),S.events.adjustWidth.bind(function(e){var n=e.table;T.trigger.beforeResize(n,"col");var t=C.delta(e.delta,n),r=v(n);wr(n,t,e.column,h,r),T.trigger.afterResize(n,"col")}),(f={on:S.on,off:S.off,hideBars:S.hideBars,showBars:S.showBars,destroy:S.destroy,events:T.registry}).on(),f.events.startDrag.bind(function(n){c=cl.some(e.selection.getRng())}),f.events.beforeResize.bind(function(n){var t,r=n.table.dom,o=e,u=cr(t=r),i=lr(r),c=Pf+n.type;o.fire("ObjectResizeStart",{target:t,width:u,height:i,origin:c})}),f.events.afterResize.bind(function(n){var t,r,o,u,i,l=n.table,a=l.dom;sr(l),c.each(function(n){e.selection.setRng(n),e.focus()}),t=e,o=cr(r=a),u=lr(a),i=Pf+n.type,t.fire("ObjectResized",{target:r,width:o,height:u,origin:i}),e.undoManager.add()}),l=cl.some(f))}),e.on("ObjectResizeStart",function(t){var r,u,c,l,a=t.target;n(a)&&(r=kl.fromDom(a),b(e.dom.select(".mce-clonedresizable"),function(n){e.dom.addClass(n,"mce-"+vo(e)+"-columns")}),!Vi(r)&&kf(e)?Mf(r):!Hi(r)&&bo(e)&&Bf(r),qi(r)&&gl(t.origin,Pf)&&Bf(r),o=t.width,i=If(e)?"":(l=(u=e).dom.getStyle(c=a,"width")||u.dom.getAttrib(c,"width"),cl.from(l).filter(_).getOr("")))}),e.on("ObjectResized",function(u){var c,l,a,f,s,m,d,g,p,h,v=u.target;n(v)&&(c=kl.fromDom(v),l=u.origin,gl(l,"corner-")&&(a=c,f=u.width,h=L(l,"e"),""===i&&Bf(a),f!==o&&""!==i?(Ve(a,"width",i),s=r(),m=t(a),d=wo(e)||h?Ir(a).columns-1:0,wr(a,f-o,d,s,m)):/^(\d+(\.\d+)?)%$/.test(i)&&Ve(a,"width",f*parseFloat(i.replace("%",""))/o+"%"),/^(\d+(\.\d+)?)px$/.test(i)&&(p=ia.fromTable(g=a),ia.hasColumns(p)||b(nn(g),function(e){Ve(e,"width",Ue(e,"width")),Ql(e,"width")}))),sr(c),to(e,c.dom,Cf))}),e.on("SwitchMode",function(){l.each(function(n){e.mode.isReadOnly()?n.hideBars():n.showBars()})}),{lazyResize:function(){return l},lazyWire:function(){return a.getOr(Fi(kl.fromDom(e.getBody()),Do))},destroy:function(){l.each(function(e){e.destroy()}),a.each(function(n){var t=n;e.inline&&aa(t.parent())})}}}function Ao(e,n){return{element:e,offset:n}}function ko(e,n){return(e.property().isText(n)?e.property().getText(n):e.property().children(n)).length}function Io(e,n){1===Xe(e,"colspan")&&It(e).bind(function(e){return n=["fixed","relative","empty"],cl.from(za.exec(e)).bind(function(e){var t=Number(e[1]),r=e[2],o=r;return d(n,function(e){return d(Na[e],function(e){return o===e})})?cl.some({value:t,unit:r}):cl.none()});var n}).each(function(t){var r=t.value/2;Pt(e,r,t.unit),Pt(n,r,t.unit)})}function Bo(e){return R(e,function(e){return Wf(e.element)})}function Mo(e){var n="thead"===e.section,t=Le(jf(e.cells),"th");return n||t?{type:"header",subType:n&&t?"sectionCells":n?"section":"cells"}:"tfoot"===e.section?{type:"footer"}:{type:"body"}}function Eo(e,n,t){return te(t(e.element,n),!0,e.isLocked)}function Po(e,n){return e.section!==n?re(e.element,e.cells,n,e.isNew):e}function No(){return{transformRow:Po,transformCell:function(e,n,t){var r,o,u=t(e.element,n);return te("td"!==le(u)?(o=Yn(r=u,"td"),Dn(r,o),Bn(o,we(r)),aa(r),o):u,e.isNew,e.isLocked)}}}function zo(){return{transformRow:Po,transformCell:Eo}}function Lo(){return{transformRow:function(e,n){return Po(e,"thead"===n?"tbody":n)},transformCell:Eo}}function _o(e,n,t,r){t===r?Ql(e,n):Me(e,n,t)}function Wo(e,n,t){I(Te(e,n)).fold(function(){return An(e,t)},function(e){return On(e,t)})}function jo(e,n){function t(n,t){var r,i,c;Bn((Mn(c=Ae(r=e,i=t).getOrThunk(function(){var e=kl.fromTag(i,de(r).dom);return"thead"===i?Wo(r,"caption,colgroup",e):"colgroup"===i?Wo(r,"caption",e):la(r,e),e})),c),("colgroup"===t?function(e){return x(e,function(e){return p(e.cells,function(e){return _o(e.element,"span",e.colspan,1),e.element})})}:function(e){return p(e,function(e){e.isNew&&o.push(e.element);var n=e.element;return Mn(n),b(e.cells,function(e){e.isNew&&u.push(e.element),_o(e.element,"colspan",e.colspan,1),_o(e.element,"rowspan",e.rowspan,1),la(n,e.element)}),n})})(n))}function r(n,r){0<n.length?t(n,r):Ae(e,r).each(aa)}var o=[],u=[],i=[],c=[],l=[],a=[];return b(n,function(e){switch(e.section){case"thead":i.push(e);break;case"tbody":c.push(e);break;case"tfoot":l.push(e);break;case"colgroup":a.push(e)}}),r(a,"colgroup"),r(i,"thead"),r(c,"tbody"),r(l,"tfoot"),{newRows:o,newCells:u}}function Fo(e,n){if(0===e.length)return 0;var t=e[0];return S(e,function(e){return!n(t.element,e.element)}).getOr(e.length)}function Ho(e,n){var t=p(e,function(e){return p(e.cells,rl)});return p(e,function(r,o){var u=x(r.cells,function(r,u){if(!1!==t[o][u])return[];var i,c,l,a,f,s,m,d,g=(l=u,a=n,m=(i=e)[c=o],d="colgroup"===m.section,{colspan:Fo(m.cells.slice(l),a),rowspan:d?1:Fo((f=i.slice(c),s=l,p(f,function(e){return mn(e,s)})),a)});return function(e,n,r,o){for(var u=e;e+r>u;u++)for(var i=n;n+o>i;i++)t[u][i]=!0}(o,u,g.rowspan,g.colspan),[{element:r.element,rowspan:g.rowspan,colspan:g.colspan,isNew:r.isNew}]});return{element:r.element,cells:u,section:r.section,isNew:r.isNew}})}function Vo(e,n,t){var r=[];b(e.colgroups,function(o){for(var u=[],i=0;i<e.grid.columns;i++){var c=ia.getColumnAt(e,i).map(function(e){return te(e.element,t,!1)}).getOrThunk(function(){return te(n.colGap(),!0,!1)});u.push(c)}r.push(re(o.element,u,"colgroup",t))});for(var o=0;o<e.grid.rows;o++){for(var u=[],i=0;i<e.grid.columns;i++){var c=ia.getAt(e,o,i).map(function(e){return te(e.element,t,e.isLocked)}).getOrThunk(function(){return te(n.gap(),!0,!1)});u.push(c)}var l=e.all[o],a=re(l.element,u,l.section,t);r.push(a)}return r}function qo(e){return Ho(e,q)}function Uo(e,n){return B(e.all,function(e){return C(e.cells,function(e){return q(n,e.element)})})}function Go(e,n,t){var r=_e(p(n.selection,function(n){return en(n).bind(function(n){return Uo(e,n)}).filter(t)}));return je(0<r.length,r)}function $o(e,n,t,r,o){return function(u,i,c,l,a){var f=ia.fromTable(i),s=cl.from(null==a?void 0:a.section).getOrThunk(Ui);return n(f,c).map(function(n){var t=Vo(f,l,!1),r=e(t,n,q,o(l),s),u=vn(r.grid);return{info:n,grid:qo(r.grid),cursor:r.cursor,lockedColumns:u}}).bind(function(e){var n=jo(i,e.grid),o=cl.from(null==a?void 0:a.sizing).getOrThunk(function(){return Ha(i)}),c=cl.from(null==a?void 0:a.resize).getOrThunk(xr);return t(i,e.grid,e.info,{sizing:o,resize:c,section:s}),r(i),Xr(u,i),Ql(i,ua),0<e.lockedColumns.length&&Me(i,ua,e.lockedColumns.join(",")),cl.some({cursor:e.cursor,newRows:n.newRows,newCells:n.newCells})})}}function Ko(e,n){return Go(e,n,ol).map(function(e){return{cells:e,generators:n.generators,clipboard:n.clipboard}})}function Xo(e,n){return Go(e,n,ol)}function Yo(e,n){return Go(e,n,function(e){return!e.isLocked})}function Jo(e,n){return R(n,function(n){return Uo(e,n).exists(function(e){return!e.isLocked})})}function Qo(e,n){return n.mergable.filter(function(n){return Jo(e,n.cells)})}function Zo(e,n){return n.unmergable.filter(function(n){return Jo(e,n)})}function eu(e,n,t,r){for(var o=pn(e).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<gn(o[0]);c++){var l=o[i],a=mn(l,c),f=t(a.element,n);!0===f&&!1===u?sn(l,c,te(r(),!0,a.isLocked)):!0===f&&(u=!1)}return e}function nu(e,n,t,r){var o,u,i=pn(e).rows;return n>0&&n<i.length&&(o=i[n-1].cells,u=t,b(y(o,function(e,n){return d(e,function(e){return u(e.element,n.element)})?e:e.concat([n])},[]),function(e){for(var o=cl.none(),u=n;u<i.length;u++)for(var c=0;c<gn(i[0]);c++)!function(n){var c=i[u],l=mn(c,n);t(l.element,e.element)&&(o=o.isNone()?cl.some(r()):o).each(function(e){sn(c,n,te(e,!0,l.isLocked))})}(c)})),e}function tu(e,n){return{rowDelta:0,colDelta:gn(e[0])-gn(n[0])}}function ru(e,n){return{rowDelta:e.length-n.length,colDelta:0}}function ou(e,n,t,r){var o="colgroup"===n.section?t.col:t.cell;return g(e,function(e){return te(o(),!0,r(e))})}function uu(e,n,t,r){var o=e[e.length-1];return e.concat(g(n,function(){var e="colgroup"===o.section?t.colgroup:t.row,n=bn(o,e,i),u=ou(n.cells.length,n,t,function(e){return Pl(r,e.toString())});return oa(n,u)}))}function iu(e,n,t,r){return p(e,function(e){var o=ou(n,e,t,rl);return an(e,r,o)})}function cu(e,n,t){var r=n.colDelta<0?iu:i,o=n.rowDelta<0?uu:i,u=vn(e),c=gn(e[0]),l=d(u,function(e){return e===c-1}),a=r(e,Math.abs(n.colDelta),t,l?c-1:c),f=vn(a);return o(a,Math.abs(n.rowDelta),t,D(f,ol))}function lu(e,n,t){return v(t,function(t){return t>=e.column&&t<=gn(n[0])+e.column})}function au(e,n,t,r,o){var u,i,c,a=vn(n),f=(u=e,i=a,c=gn(n[0]),{row:pn(n).cols.length+u.row,column:C(g(c-u.column,function(e){return e+u.column}),function(e){return R(i,function(n){return n!==e})}).getOr(c-1)}),s=pn(t).rows,m=lu(f,s,a);return function(e,n,t){if(e.row>=n.length||e.column>gn(n[0]))return Gf.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);var r=n.slice(e.row),o=r[0].cells.slice(e.column),u=gn(t[0]),i=t.length;return Gf.value({rowDelta:r.length-i,colDelta:o.length-u})}(f,n,s).map(function(e){var t=sl(sl({},e),{colDelta:e.colDelta-m.length}),u=cu(n,t,r),i=vn(u),c=lu(f,s,i);return function(e,n,t,r,o,u){for(var i,c,a,f,s,m=e.row,d=e.column,g=m+t.length,p=d+gn(t[0])+u.length,b=D(u,ol),h=m;g>h;h++)for(var v,w,y,C=0,S=d;p>S;S++)b[S]?C++:(a=S,f=void 0,f=l(o,mn((i=n)[c=h],a).element),s=i[c],1<i.length&&1<gn(s)&&(a>0&&f(dn(s,a-1))||a<s.cells.length-1&&f(dn(s,a+1))||c>0&&f(dn(i[c-1],a))||c<i.length-1&&f(dn(i[c+1],a)))&&eu(n,dn(n[h],S),o,r.cell),w=(v=mn(t[h-m],S-d-C)).element,y=r.replace(w),sn(n[h],S,te(y,!0,v.isLocked)));return n}(f,u,s,r,o,c)})}function fu(e,n,t,r,o){var u=e,i=o,c=r.cell;u>0&&u<n[0].cells.length&&b(n,function(e){var n=e.cells[u-1],t=e.cells[u];i(t.element,n.element)&&sn(e,u,te(c(),!0,t.isLocked))});var l=cu(t,ru(t,n),r);return p(cu(n,ru(n,l),r),function(n,t){return an(n,e,l[t].cells)})}function su(e,n,t,r,o){nu(n,e,o,r.cell);var u,i,c=vn(n),l=tu(n,t),a=cu(n,sl(sl({},l),{colDelta:l.colDelta-c.length}),r),f=pn(a),s=f.cols,m=f.rows,d=vn(a),g=tu(t,n),b=sl(sl({},g),{colDelta:g.colDelta+d.length}),h=cu((u=r,i=d,p(t,function(e){return y(i,function(n,t){return fn(n,t,ou(1,e,u,ol)[0])},e)})),b,r);return s.concat(m.slice(0,e)).concat(h).concat(m.slice(e,m.length))}function mu(e,n,t,r,o){var u,i,c,l,a=pn(e),f=a.rows,s=a.cols,m=f.slice(0,n),d=f.slice(n),g=(u=f[t],i=function(e,t){return n>0&&n<f.length&&r(dn(f[n-1],t),dn(f[n],t))?mn(f[n],t):te(o(e.element,r),!0,e.isLocked)},c=r,l=o,bn(u,function(e){return l(e,c)},i));return s.concat(m).concat([g]).concat(d)}function du(e,n,t,r,o){return p(e,function(e){var u,i,c=n>0&&n<gn(e)&&r(dn(e,n-1),dn(e,n)),l=(u=e.section,i=o,"colgroup"!==u&&c?mn(e,n):te(i(mn(e,t).element,r),!0,!1));return fn(e,n,l)})}function gu(e,n,t,r){return void 0!==dn((u=e)[i=n],t)&&i>0&&r(dn(u[i-1],t),dn(u[i],t))||(o=e[n],t>0&&r(dn(o,t-1),dn(o,t)));var o,u,i}function pu(e,n,t,r){function o(e){return("row"===e?Je:Ye)(n)?e+"group":e}return e?Wf(n)?o(t):null:r&&Wf(n)?o("row"===t?"col":"row"):null}function bu(e,n,t){return te(t(e.element,n),!0,e.isLocked)}function hu(e,n,t,r,o,u,i){return p(e,function(e,c){return a=function(e,l){if(f=e,d(n,function(e){return t(f.element,e.element)})){var a=i(e,c,l)?o(e,t,r):e;return u(a,c,l).each(function(e){var n=a.element;G({scope:cl.from(e)},function(e,t){e.fold(function(){Ql(n,t)},function(e){Be(n.dom,t,e)})})}),a}return e;var f},f=p((l=e).cells,a),re(l.element,f,l.section,l.isNew);var l,a,f})}function vu(e,n,t){return x(e,function(r,o){return gu(e,o,n,t)?[]:[mn(r,n)]})}function wu(e,n,t,r,o){var u,c,l,a,f=pn(e).rows,s=x(n,function(e){return vu(f,e,r)}),m=p(e,function(e){return Bo(e.cells)}),d=(u=s,R(c=m,i)&&Bo(u)?ol:function(e,n,t){return!("th"===le(e.element)&&c[n])}),g=(l=t,a=m,function(e,n){return cl.some(pu(l,e.element,"row",a[n]))});return hu(e,s,r,o,bu,g,d)}function yu(e,n,t,r){var o=pn(e).rows;return hu(e,p(n,function(e){return mn(o[e.row],e.column)}),t,r,bu,cl.none,ol)}function Cu(e){return y(e,function(e,n){return d(e,function(e){return e.column===n.column})?e:e.concat([n])},[]).sort(function(e,n){return e.column-n.column})}function Su(e){return"tr"===le(e)||Kf(e)}function Tu(e){return{element:e,colspan:Ke(e,"colspan",1),rowspan:Ke(e,"rowspan",1)}}function xu(e){return Ne(e,"scope").map(function(e){return e.substr(0,3)})}function Ru(e){return n=e,t=Yf.property().name(n),m(Xf,t);var n,t}function Du(e){return n=e,m(["ol","ul"],Yf.property().name(n));var n}function Ou(e){function n(e){return"br"===le(e)}function t(e){return Yt(e).bind(function(t){var r=ve(t).map(function(e){return!!Ru(e)||(n=e,!!m(["br","img","hr","input"],Yf.property().name(n))&&"img"!==le(e));var n}).getOr(!1);return pe(t).map(function(o){return!0===r||"li"===le(u=o)||De(u,Du).isSome()||n(t)||Ru(o)&&!q(e,o)?[]:[kl.fromTag("br")];var u})}).getOr([])}var r,o=0===(r=x(e,function(e){var r=we(e);return R(r,function(e){return n(e)||Hl(e)&&0===Pn(e).trim().length})?[]:r.concat(t(e))})).length?[kl.fromTag("br")]:r;Mn(e[0]),Bn(e[0],o)}function Au(e){return Ur(e,!0)}function ku(e){0===nn(e).length&&aa(e)}function Iu(e,n){return{grid:e,cursor:n}}function Bu(e,n,t){var r,o,u,i,c,l=(r=n,o=t,c=pn(e).rows,cl.from(null===(i=null===(u=c[r])||void 0===u?void 0:u.cells[o])||void 0===i?void 0:i.element).filter(Au).orThunk(function(){return B(c,function(e){return B(e.cells,function(e){var n=e.element;return je(Au(n),n)})})}));return Iu(e,l)}function Mu(e){return y(e,function(e,n){return d(e,function(e){return e.row===n.row})?e:e.concat([n])},[]).sort(function(e,n){return e.row-n.row})}function Eu(e,n){return function(t,r,o,u,c){return Bu(function(e,n,t,r,o,u,c){var l=pn(e),a=l.cols,f=l.rows,s=f[n[0]],m=x(n,function(e){return r=o,x((n=f)[t=e].cells,function(e,o){return gu(n,t,o,r)?[]:[e]});var n,t,r}),d=p(s.cells,function(e,n){return Bo(vu(f,n,o))}),g=M([],f,!0);b(n,function(e){g[e]=c.transformRow(f[e],t)});var h,v,w,y,C=a.concat(g),S=(h=s,R(v=d,i)&&Bo(h.cells)?ol:function(e,n,t){return!("th"===le(e.element)&&v[t])}),T=(w=r,y=d,function(e,n,t){return cl.some(pu(w,e.element,"col",y[t]))});return hu(C,m,o,u,c.transformCell,T,S)}(t,p(Mu(r),function(e){return e.row}),e,n,o,u.replaceOrInit,c),r[0].row,r[0].column)}}function Pu(e,n,t){var r,o=(r=t.section,un(e,function(){return r}));return Vo(ia.generate(o),n,!0)}function Nu(e,n,t,r){var o=r.sizing,u=ia.generate(n);vr(u,o.getWidths(u,o),o)}function zu(e,n,t,r){var o=t,u=r.sizing,i=r.resize,c=ia.generate(n),l=u.getWidths(c,u),a=u.pixelWidth(),f=i.calcRedestributedWidths(l,a,o.pixelDelta,u.isRelative),s=f.newSizes,m=f.delta;vr(c,s,u),u.adjustTableWidth(m)}function Lu(e,n){return d(n,function(e){return 0===e.column&&e.isLocked})}function _u(e,n){return d(n,function(n){return n.column+n.colspan>=e.grid.columns&&n.isLocked})}function Wu(e,n){var t=ut(e);return y(Cu(n),function(e,n){return e+t[n.column].map(ot).getOr(0)},0)}function ju(e){return function(n,t){return Xo(n,t).filter(function(t){return!(e?Lu:_u)(n,t)}).map(function(e){return{details:e,pixelDelta:Wu(n,e)}})}}function Fu(e){return function(n,t){return Ko(n,t).filter(function(t){return!(e?Lu:_u)(n,t.cells)})}}function Hu(e,n){var t=ia.fromTable(e);return Xo(t,n).bind(function(e){var n=e[e.length-1],r=e[0].column,o=n.column+n.colspan,u=T(p(t.all,function(e){return v(e.cells,function(e){return e.column>=r&&e.column<o})}));return jf(u)}).getOr("")}function Vu(e,n){return Xo(ia.fromTable(e),n).bind(jf).getOr("")}function qu(e,n,t){function r(e){return"table"===le(ir(e))}function u(t,r,o,u,c){return function(l,a,f){void 0===f&&(f=!1),sr(l);var s=u(),m=kl.fromDom(e.getDoc()),d=rr(o,m,i),g={sizing:xo(e,l),resize:(yo(e)?Tr:xr)(),section:function(n){switch(ho(e)){case"section":return Ff();case"sectionCells":return Hf();case"cells":return Vf();default:return function(e,n){switch(B(ia.fromTable(e).all,function(e){var n=Mo(e);return"header"===n.type?cl.from(n.subType):cl.none()}).getOr(n)){case"section":return No();case"sectionCells":return zo();case"cells":return Lo()}}(n,"section")}}(l)};return r(l)?t(s,l,a,d,g).bind(function(t){b(t.newRows,function(n){eo(e,n.dom)}),b(t.newCells,function(n){no(e,n.dom)});var r,o=(r=l,t.cursor.fold(function(){return k(nn(r)).filter(Xl).map(function(t){n.clear(r);var o=e.dom.createRng();return o.selectNode(t.dom),e.selection.setRng(o),Me(t,"data-mce-selected","1"),o})},function(t){var o=Lf(_f,t),u=e.dom.createRng();return u.setStart(o.element.dom,o.offset),u.setEnd(o.element.dom,o.offset),e.selection.setRng(u),n.clear(r),cl.some(u)}));return Xl(l)&&(sr(l),f||to(e,l.dom,c)),o.map(function(e){return{rng:e,effect:c}})}):cl.none()}}var i=Co(e),c=yo(e)?o:Io;return{deleteRow:u(cs,function(n){return!1===r(e)||1<Ir(n).rows},o,t,Sf),deleteColumn:u(is,function(n){return!1===r(e)||1<Ir(n).columns},o,t,Sf),insertRowsBefore:u(ts,ol,o,t,Sf),insertRowsAfter:u(rs,ol,o,t,Sf),insertColumnsBefore:u(os,ol,c,t,Sf),insertColumnsAfter:u(us,ol,c,t,Sf),mergeCells:u(ps,ol,o,t,Sf),unmergeCells:u(bs,ol,o,t,Sf),pasteColsBefore:u(vs,ol,o,t,Sf),pasteColsAfter:u(ws,ol,o,t,Sf),pasteRowsBefore:u(ys,ol,o,t,Sf),pasteRowsAfter:u(Cs,ol,o,t,Sf),pasteCells:u(hs,ol,o,t,Tf),makeCellsHeader:u(ds,ol,o,t,Sf),unmakeCellsHeader:u(gs,ol,o,t,Sf),makeColumnsHeader:u(ls,ol,o,t,Sf),unmakeColumnsHeader:u(as,ol,o,t,Sf),makeRowsHeader:u(fs,ol,o,t,Sf),makeRowsBody:u(ss,ol,o,t,Sf),makeRowsFooter:u(ms,ol,o,t,Sf),getTableRowType:Ss,getTableCellType:Vu,getTableColType:Hu}}function Uu(e,n,t,r){return g(e,function(e){return function(e,n,t,r){for(var o=kl.fromTag("tr"),u=0;e>u;u++){var i=n>r||t>u?kl.fromTag("th"):kl.fromTag("td");t>u&&Me(i,"scope","row"),n>r&&Me(i,"scope","col"),la(i,kl.fromTag("br")),la(o,i)}return o}(n,t,r,e)})}function Gu(e,n){e.selection.select(n.dom,!0),e.selection.collapse(!0)}function $u(e,n,t,r,o){var u=lo(e),i={styles:u,attributes:co(e),colGroups:e.getParam("table_use_colgroups",!1,"boolean")};return e.undoManager.ignore(function(){var u=function(e,n,t,r,o,u){void 0===u&&(u=Ts);var i,c,l=kl.fromTag("table"),a="cells"!==o;qe(l,u.styles),Ee(l,u.attributes),u.colGroups&&la(l,(i=n,c=kl.fromTag("colgroup"),g(i,function(){return la(c,kl.fromTag("col"))}),c));var f,s=Math.min(e,t);a&&t>0&&(f=kl.fromTag("thead"),la(l,f),Bn(f,Uu(t,n,"sectionCells"===o?s:0,r)));var m=kl.fromTag("tbody");return la(l,m),Bn(m,Uu(a?e-s:e,n,a?0:t,r)),l}(t,n,o,r,ho(e),i);Me(u,"data-mce-id","__mce");var c,l,a,f=(c=u,l=kl.fromTag("div"),a=kl.fromDom(c.dom.cloneNode(!0)),la(l,a),l.dom.innerHTML);e.insertContent(f),e.addVisual()}),ke(ir(e),'table[data-mce-id="__mce"]').map(function(n){var t,r,o;return kf(e)?Mf(n):If(e)?Ef(n):(bo(e)||(t=u.width,Xc(t)&&-1!==t.indexOf("%")))&&Bf(n),sr(n),Ql(n,"data-mce-id"),r=e,b(xe(n,"tr"),function(e){eo(r,e.dom),b(xe(e,"th,td"),function(e){no(r,e.dom)})}),o=e,ke(n,"td,th").each(l(Gu,o)),n.dom}).getOr(null)}function Ku(e,n,t,r,o){function u(e){return tl(e)&&e>0}if(void 0===r&&(r={}),u(n)&&u(t)){var i=r.headerRows||0;return $u(e,t,n,r.headerColumns||0,i)}return console.error(o),null}function Xu(e){return function(){return e().fold(function(){return[]},function(e){return p(e,function(e){return e.dom})})}}function Yu(e){return function(n){var t=0<n.length?cl.some(ur(n)):cl.none();e(t)}}function Ju(e,n,t){var r=Ke(e,n,1);1===t||1>=r?Ql(e,n):Me(e,n,Math.min(t,r))}function Qu(e,n,t){return function(n,r){for(var o=0;o<r.length;o++){var u=e.getStyle(r[o],t);if((n=void 0===n?u:n)!==u)return""}return n}(void 0,e.select("td,th",n))}function Zu(e,n,t){t&&e.formatter.apply("align"+t,{},n)}function ei(e,n){xs.each("left center right".split(" "),function(t){e.formatter.remove("align"+t,{},n)})}function ni(e){return Ds.test(t=e)||Os.test(t)?cl.some({value:(gl(n=e,"#")?n.substring("#".length):n).toUpperCase()}):cl.none();var n,t}function ti(e){var n=e.toString(16);return(1===n.length?"0"+n:n).toUpperCase()}function ri(e){return{value:ti(e.red)+ti(e.green)+ti(e.blue)}}function oi(e,n,t,r){return{red:e,green:n,blue:t,alpha:r}}function ui(e,n,t,r){return oi(parseInt(e,10),parseInt(n,10),parseInt(t,10),parseFloat(r))}function ii(e){var n=e;return{get:function(){return n},set:function(e){n=e}}}function ci(e){function n(){return t.get().each(e)}var t=ii(cl.none());return{clear:function(){n(),t.set(cl.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(e){n(),t.set(cl.some(e))}}}function li(){var e=ci(o);return sl(sl({},e),{on:function(n){return e.get().each(n)}})}function ai(e){return Z(e,"menu")}function fi(e,n){return function(t){var r;e.execCommand("mceTableApplyCellStyle",!1,((r={})[n]=t,r))}}function si(e,n,t,r,o){return function(u){return u(Bs(e,n,t,r,o))}}function mi(e,n,t){var r=p(n,function(e){return{text:e.title,value:"#"+ni(n=e.value).orThunk(function(){return function(e){if("transparent"===e)return cl.some(oi(0,0,0,0));var n=As.exec(e);if(null!==n)return cl.some(ui(n[1],n[2],n[3],"1"));var t=ks.exec(e);return null!==t?cl.some(ui(t[1],t[2],t[3],t[4])):cl.none()}(n).map(ri)}).getOrThunk(function(){var e=document.createElement("canvas");e.height=1,e.width=1;var t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillStyle=n,t.fillRect(0,0,1,1);var r=t.getImageData(0,0,1,1).data;return ri(oi(r[0],r[1],r[2],r[3]))}).value,type:"choiceitem"};var n});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:0<r.length?r:void 0,allowCustomColors:!1},onAction:function(n){var r,o="remove"===n.value?"":n.value;e.execCommand("mceTableApplyCellStyle",!1,((r={})[t]=o,r))}}]}function di(e){return function(){var n=e.queryCommandValue("mceTableRowType");e.execCommand("mceTableRowType",!1,{type:"header"===n?"body":"header"})}}function gi(e){return function(){var n=e.queryCommandValue("mceTableColType");e.execCommand("mceTableColType",!1,{type:"th"===n?"td":"th"})}}function pi(e){return Es.concat((0<(n=Is(go(e))).length?cl.some({name:"class",type:"listbox",label:"Class",items:n}):cl.none()).toArray());var n}function bi(e,n){var t=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Is(io(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===n?[{name:"borderwidth",type:"input",label:"Border width"}].concat(t):t
}}function hi(e){return function(n,t){var r=n.dom;return{setAttrib:function(n,o){e&&!o||r.setAttrib(t,n,o)},setStyle:function(n,o){e&&!o||r.setStyle(t,n,o)},setFormat:function(r,o){e&&!o||(""===o?n.formatter.remove(r,{value:null},t,!0):n.formatter.apply(r,{value:o},t))}}}}function vi(e){return function(n){return gl(n,"rgb")?e.toHex(n):n}}function wi(e,n){var t=kl.fromDom(n);return{borderwidth:Ge(t,"border-width").getOr(""),borderstyle:Ge(t,"border-style").getOr(""),bordercolor:Ge(t,"border-color").map(vi(e)).getOr(""),backgroundcolor:Ge(t,"background-color").map(vi(e)).getOr("")}}function yi(e){var n=e[0];return b(e.slice(1),function(e){b(Bl(n),function(t){G(e,function(e,r){var o=n[t];""!==o&&t===r&&o!==e&&(n[t]="")})})}),n}function Ci(e,n,t,r){return C(e,function(e){return!el(t.formatter.matchNode(r,n+e))}).getOr("")}function Si(e,n){var t=ia.fromTable(e);return p(v(ia.justCells(t),function(e){return d(n,function(n){return q(e.element,n)})}),function(e){return{element:e.element.dom,column:ia.getColumnAt(t,e.column).map(function(e){return e.element.dom})}})}function Ti(e,n,t,r){var o=r.getData();r.close(),e.undoManager.transact(function(){var r,u=e,i=n,c=t,l=K(r=o,function(e,n){return c[n]!==e});0<J(l)&&1<=i.length&&rn(i[0]).each(function(e){var n,t,o,c=Si(e,i),a=0<J(K(l,function(e,n){return"scope"!==n&&"celltype"!==n})),f=Pl(l,"celltype");(a||Pl(l,"scope"))&&(n=u,t=r,o=1===c.length,b(c,function(e){var r,u,i,c,l,a,f=e.element,s=o?Ps.normal(n,f):Ps.ifTruthy(n,f),m=e.column.map(function(e){return o?Ps.normal(n,e):Ps.ifTruthy(n,e)}).getOr(s),d=t;(r=s).setAttrib("scope",d.scope),r.setAttrib("class",d["class"]),r.setStyle("height",fr(d.height)),m.setStyle("width",fr(d.width)),ao(n)&&((u=s).setFormat("tablecellbackgroundcolor",(i=t).backgroundcolor),u.setFormat("tablecellbordercolor",i.bordercolor),u.setFormat("tablecellborderstyle",i.borderstyle),u.setFormat("tablecellborderwidth",fr(i.borderwidth))),o&&(ei(n,f),c=n,l=f,xs.each("top middle bottom".split(" "),function(e){c.formatter.remove("valign"+e,{},l)})),t.halign&&Zu(n,f,t.halign),!t.valign||(a=t.valign)&&n.formatter.apply("valign"+a,{},f)})),f&&u.execCommand("mceTableCellType",!1,{type:r.celltype,no_events:!0}),to(u,e.dom,{structure:f,style:a})}),e.focus()})}function xi(e,n){var t,r,o,u,i,c=Ja(n);0!==c.length&&(r=e,t=yi(rn((o=c)[0]).map(function(e){return p(Si(e,o),function(e){function n(e,n){return c.getStyle(e,n)||c.getAttrib(e,n)}return t=r,o=e.element,u=ao(r),i=e.column,c=t.dom,l=i.getOr(o),sl({width:n(l,"width"),height:n(o,"height"),scope:c.getAttrib(o,"scope"),celltype:o.nodeName.toLowerCase(),"class":c.getAttrib(o,"class",""),halign:Ns(t,o),valign:zs(t,o)},u?wi(c,o):{});var t,o,u,i,c,l})}).getOrDie()),u={type:"tabpanel",tabs:[{title:"General",name:"general",items:pi(e)},bi(e,"cell")]},i={type:"panel",items:[{type:"grid",columns:2,items:pi(e)}]},e.windowManager.open({title:"Cell Properties",size:"normal",body:ao(e)?u:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:t,onSubmit:l(Ti,e,c,t)}))}function Ri(e){return Ls.concat((0<(n=Is(e.getParam("table_row_class_list",[],"array"))).length?cl.some({name:"class",type:"listbox",label:"Class",items:n}):cl.none()).toArray());var n}function Di(e,n,t,r){var o=r.getData();r.close(),e.undoManager.transact(function(){var r,u,i,c,l,a,f,s=e,m=n,d=t,g=K(r=o,function(e,n){return d[n]!==e});0<J(g)&&(u=Pl(g,"type"),(i=!u||1<J(g))&&(c=s,l=r,a=d,f=1===m.length,b(m,function(e){var n,t,r,o=f?Ps.normal(c,e):Ps.ifTruthy(c,e),u=l;(n=o).setAttrib("class",u["class"]),n.setStyle("height",fr(u.height)),fo(c)&&((t=o).setStyle("background-color",(r=l).backgroundcolor),t.setStyle("border-color",r.bordercolor),t.setStyle("border-style",r.borderstyle)),l.align!==a.align&&(ei(c,e),Zu(c,e,l.align))})),u&&s.execCommand("mceTableRowType",!1,{type:r.type,no_events:!0}),rn(kl.fromDom(m[0])).each(function(e){return to(s,e.dom,{structure:u,style:i})})),e.focus()})}function Oi(e){var n,t,r,o,u,i,c,a=(n=mr(e),t=Ka.selected,o=(r=Ya(n)).bind(function(e){return rn(e)}).map(on),We(r,o,function(e,n){return v(n,function(n){return d(ur(n.dom.cells),function(n){return"1"===Pe(n,t)||q(n,e)})})}).getOr([]));0!==a.length&&(u=yi(p(a,function(n){return t=e,r=n.dom,o=fo(e),i=t.dom,sl({height:i.getStyle(r,"height")||i.getAttrib(r,"height"),"class":i.getAttrib(r,"class",""),type:rn(kl.fromDom(u=r)).map(function(e){var n={selection:ur(u.cells)};return Ss(e,n)}).getOr(""),align:Ns(t,r)},o?wi(i,r):{});var t,r,o,u,i})),i={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ri(e)},bi(e,"row")]},c={type:"panel",items:[{type:"grid",columns:2,items:Ri(e)}]},e.windowManager.open({title:"Row Properties",size:"normal",body:fo(e)?i:c,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:u,onSubmit:l(Di,e,p(a,function(e){return e.dom}),u)}))}function Ai(e,n,t,r){var o=e.dom,u=r.getData(),i=K(u,function(e,n){return t[n]!==e});r.close(),""===u["class"]&&delete u["class"],e.undoManager.transact(function(){var t,r,c,l,a;n||(t=parseInt(u.cols,10)||1,r=parseInt(u.rows,10)||1,n=$u(e,t,r,0,0)),0<J(i)&&(function(e,n,t){var r,o=e.dom,u={},i={};if(u["class"]=t["class"],i.height=fr(t.height),o.getAttrib(n,"width")&&!mo(e)?u.width=(r=t.width)?r.replace(/px$/,""):"":i.width=fr(t.width),mo(e)?(i["border-width"]=fr(t.border),i["border-spacing"]=fr(t.cellspacing)):(u.border=t.border,u.cellpadding=t.cellpadding,u.cellspacing=t.cellspacing),mo(e)&&n.children)for(var c=0;c<n.children.length;c++)_s(o,n.children[c],{"border-width":fr(t.border),padding:fr(t.cellpadding)}),so(e)&&_s(o,n.children[c],{"border-color":t.bordercolor});so(e)&&(i["background-color"]=t.backgroundcolor,i["border-color"]=t.bordercolor,i["border-style"]=t.borderstyle),u.style=o.serializeStyle(sl(sl({},lo(e)),i)),o.setAttribs(n,sl(sl({},co(e)),u))}(e,n,u),((c=o.select("caption",n)[0])&&!u.caption||!c&&u.caption)&&e.execCommand("mceTableToggleCaption"),""===u.align?ei(e,n):Zu(e,n,u.align)),e.focus(),e.addVisual(),0<J(i)&&(a=!(l=Pl(i,"caption"))||1<J(i),to(e,n,{structure:l,style:a}))})}function ki(e,n){var t,r,o,u,i,c,a,f,s,m,d,g,p,b,h,v,w,y,C,S=e.dom,T=(o=so(r=e),f=lo(r),s=co(r),m=o?(u=r.dom,{borderstyle:Q(f,"border-style").getOr(""),bordercolor:vi(u)(Q(f,"border-color").getOr("")),backgroundcolor:vi(u)(Q(f,"background-color").getOr(""))}):{},sl(sl(sl(sl(sl(sl({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,"class":"",align:"",border:""}),f),s),m),(a=f["border-width"],mo(r)&&a?{border:a}:Q(s,"border").fold(function(){return{}},function(e){return{border:e}}))),(i=Q(f,"border-spacing").or(Q(s,"cellspacing")).fold(function(){return{}},function(e){return{cellspacing:e}}),c=Q(f,"border-padding").or(Q(s,"cellpadding")).fold(function(){return{}},function(e){return{cellpadding:e}}),sl(sl({},i),c))));!1===n?(t=S.getParent(e.selection.getStart(),"table",e.getBody()))?(g=t,p=so(d=e),w=d.dom,y=mo(d)?w.getStyle(g,"border-spacing")||w.getAttrib(g,"cellspacing"):w.getAttrib(g,"cellspacing")||w.getStyle(g,"border-spacing"),C=mo(d)?Qu(w,g,"padding")||w.getAttrib(g,"cellpadding"):w.getAttrib(g,"cellpadding")||Qu(w,g,"padding"),T=sl({width:w.getStyle(g,"width")||w.getAttrib(g,"width"),height:w.getStyle(g,"height")||w.getAttrib(g,"height"),cellspacing:y,cellpadding:C,border:(b=w,v=Ge(kl.fromDom(h=g),"border-width"),mo(d)&&v.isSome()?v.getOr(""):b.getAttrib(h,"border")||Qu(d.dom,h,"border-width")||Qu(d.dom,h,"border")),caption:!!w.select("caption",g)[0],"class":w.getAttrib(g,"class",""),align:Ns(d,g)},p?wi(w,g):{})):so(e)&&(T.borderstyle="",T.bordercolor="",T.backgroundcolor=""):(T.cols="1",T.rows="1",so(e)&&(T.borderstyle="",T.bordercolor="",T.backgroundcolor=""));var x=Is(po(e));0<x.length&&T["class"]&&(T["class"]=T["class"].replace(/\s*mce\-item\-table\s*/g,""));var R,D,O,A,k={type:"grid",columns:2,items:(R=x,D=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],O=e.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],A=0<R.length?[{type:"listbox",name:"class",label:"Class",items:R}]:[],D.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(O).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(A))},I=so(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[k]},bi(e,"table")]}:{type:"panel",items:[k]};e.windowManager.open({title:"Table Properties",size:"normal",body:I,onSubmit:l(Ai,e,t,T),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:T})}function Ii(e){return Xa(mr(e),ar(e))}function Bi(e,n,t,r,u){function i(e){return rn(e,w)}function c(n){return Ya(mr(t=e),ar(t)).bind(function(e){return i(e).map(function(t){return n(t,e)})});var t}function f(n){e.focus()}function s(e,n){return void 0===n&&(n=!1),c(function(t,o){var u=gr(r,t,o);e(t,u,n).each(f)})}function m(){return c(function(n,t){var u,i,c,l=gr(r,n,t),a=rr(o,kl.fromDom(e.getDoc()),cl.none());return u=l,i=a,Xo(c=ia.fromTable(n),u).bind(function(e){var n=qo(x(pn(Vo(c,i,!1)).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),function(e){var n=v(e.cells,function(e){return!e.isLocked});return 0<n.length?[sl(sl({},e),{cells:n})]:[]}));return je(0<n.length,n)}).map(function(e){return p(e,function(e){var n=Kn(e.element);return b(e.cells,function(e){var t=Xn(e.element);_o(t,"colspan",e.colspan,1),_o(t,"rowspan",e.rowspan,1),la(n,t)}),n})})})}function d(){return c(function(e,n){var t,o,u=gr(r,e,n);return t=u,Yo(o=ia.fromTable(e),t).map(function(e){var n,t,r=e[e.length-1],u=e[0].column,i=r.column+r.colspan,c=function(e,n,t){if(ia.hasColumns(e)){var r=p(v(ia.justColumns(e),function(e){return e.column>=n&&e.column<t}),function(e){var r=Xn(e.element);return Ju(r,"span",t-n),r}),o=kl.fromTag("colgroup");return Bn(o,r),[o]}return[]}(o,u,i),l=(n=u,t=i,p(o.all,function(e){var r=p(v(e.cells,function(e){return e.column>=n&&e.column<t}),function(e){var r=Xn(e.element);return Ju(r,"colspan",t-n),r}),o=kl.fromTag("tr");return Bn(o,r),o}));return M(M([],c,!0),l,!0)})})}function g(n,t){return t().each(function(t){var o=p(t,Xn);c(function(t,u){var i,c,l=or(kl.fromDom(e.getDoc())),a=(i=o,c=l,{selection:dr(r),clipboard:i,generators:c});n(t,a).each(f)})})}function h(e){return function(n,t){return Q(t,"type").each(function(n){s(e(n),t.no_events)})}}var w=ar(e);G({mceTableSplitCells:function(){return s(n.unmergeCells)},mceTableMergeCells:function(){return s(n.mergeCells)},mceTableInsertRowBefore:function(){return s(n.insertRowsBefore)},mceTableInsertRowAfter:function(){return s(n.insertRowsAfter)},mceTableInsertColBefore:function(){return s(n.insertColumnsBefore)},mceTableInsertColAfter:function(){return s(n.insertColumnsAfter)},mceTableDeleteCol:function(){return s(n.deleteColumn)},mceTableDeleteRow:function(){return s(n.deleteRow)},mceTableCutCol:function(){return d().each(function(e){u.setColumns(e),s(n.deleteColumn)})},mceTableCutRow:function(){return m().each(function(e){u.setRows(e),s(n.deleteRow)})},mceTableCopyCol:function(){return d().each(function(e){return u.setColumns(e)})},mceTableCopyRow:function(){return m().each(function(e){return u.setRows(e)})},mceTablePasteColBefore:function(){return g(n.pasteColsBefore,u.getColumns)},mceTablePasteColAfter:function(){return g(n.pasteColsAfter,u.getColumns)},mceTablePasteRowBefore:function(){return g(n.pasteRowsBefore,u.getRows)},mceTablePasteRowAfter:function(){return g(n.pasteRowsAfter,u.getRows)},mceTableDelete:function(){return Ii(e).each(function(n){rn(n,w).filter(a(w)).each(function(n){var t,r=kl.fromText("");On(n,r),aa(n),e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):((t=e.dom.createRng()).setStart(r.dom,0),t.setEnd(r.dom,0),e.selection.setRng(t),e.nodeChanged())})})},mceTableCellToggleClass:function(n,t){c(function(n){var o=Ja(r),u=R(o,function(n){return e.formatter.match("tablecellclass",{value:t},n.dom)})?e.formatter.remove:e.formatter.apply;b(o,function(e){return u("tablecellclass",{value:t},e.dom)}),to(e,n.dom,Cf)})},mceTableToggleClass:function(n,t){c(function(n){e.formatter.toggle("tableclass",{value:t},n.dom),to(e,n.dom,Cf)})},mceTableToggleCaption:function(){Ii(e).each(function(n){rn(n,w).each(function(t){Ae(t,"caption").fold(function(){var n,r,o=kl.fromTag("caption");la(o,kl.fromText("Caption")),r=o,ye(n=t,0).fold(function(){la(n,r)},function(e){Dn(e,r)}),e.selection.setCursorLocation(o.dom,0)},function(r){me("caption")(n)&&V("td",t).each(function(n){return e.selection.setCursorLocation(n.dom,0)}),aa(r)}),to(e,t.dom,Sf)})})},mceTableSizingMode:function(n,t){return r=t,Ii(e).each(function(n){If(e)||kf(e)||bo(e)||rn(n,w).each(function(n){"relative"!==r||Hi(n)?"fixed"!==r||Vi(n)?"responsive"!==r||qi(n)||Ef(n):Mf(n):Bf(n),sr(n),to(e,n.dom,Sf)})});var r},mceTableCellType:h(function(e){return"th"===e?n.makeCellsHeader:n.unmakeCellsHeader}),mceTableColType:h(function(e){return"th"===e?n.makeColumnsHeader:n.unmakeColumnsHeader}),mceTableRowType:h(function(e){switch(e){case"header":return n.makeRowsHeader;case"footer":return n.makeRowsFooter;default:return n.makeRowsBody}})},function(n,t){return e.addCommand(t,n)}),G({mceTableProps:l(ki,e,!1),mceTableRowProps:l(Oi,e),mceTableCellProps:l(xi,e,r)},function(n,t){return e.addCommand(t,function(){return n()})}),e.addCommand("mceInsertTable",function(n,t){Yc(t)&&0<Bl(t).length?Ku(e,t.rows,t.columns,t.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):ki(e,!0)}),e.addCommand("mceTableApplyCellStyle",function(n,t){function o(e){return"tablecell"+e.toLowerCase().replace("-","")}var u,c;!Yc(t)||0!==(u=Ja(r)).length&&(function(e){for(var n in e)if(Ml.call(e,n))return;return 1}(c=K(t,function(n,t){return e.formatter.has(o(t))&&Xc(n)}))||(G(c,function(n,t){b(u,function(r){Ps.normal(e,r.dom).setFormat(o(t),n)})}),i(u[0]).each(function(n){return to(e,n.dom,Cf)})))})}function Mi(e,n){return rn(e,n).bind(function(n){var t=nn(n);return S(t,function(n){return q(e,n)}).map(function(e){return{index:e,all:t}})})}function Ei(e,n){var t=e.document.createRange();return t.selectNode(n.dom),t}function Pi(e,n){var t=e.document.createRange();return Ys(t,n),t}function Ni(e,n,t){var r,o=e.document.createRange(),u=o;return n.fold(function(e){u.setStartBefore(e.dom)},function(e,n){u.setStart(e.dom,n)},function(e){u.setStartAfter(e.dom)}),r=o,t.fold(function(e){r.setEndBefore(e.dom)},function(e,n){r.setEnd(e.dom,n)},function(e){r.setEndAfter(e.dom)}),o}function zi(e,n,t,r,o){var u=e.document.createRange();return u.setStart(n.dom,t),u.setEnd(r.dom,o),u}function Li(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}}function _i(e,n,t){return n(kl.fromDom(t.startContainer),t.startOffset,kl.fromDom(t.endContainer),t.endOffset)}function Wi(e,n){var t,r,o,i=(t=e,n.match({domRange:function(e){return{ltr:u(e),rtl:cl.none}},relative:function(e,n){return{ltr:E(function(){return Ni(t,e,n)}),rtl:E(function(){return cl.some(Ni(t,n,e))})}},exact:function(e,n,r,o){return{ltr:E(function(){return zi(t,e,n,r,o)}),rtl:E(function(){return cl.some(zi(t,r,o,e,n))})}}}));return(o=(r=i).ltr()).collapsed?r.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return Js.rtl(kl.fromDom(e.endContainer),e.endOffset,kl.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return _i(0,Js.ltr,o)}):_i(0,Js.ltr,o)}function ji(e,n){return Wi(e,n).match({ltr:function(n,t,r,o){var u=e.document.createRange();return u.setStart(n.dom,t),u.setEnd(r.dom,o),u},rtl:function(n,t,r,o){var u=e.document.createRange();return u.setStart(r.dom,o),u.setEnd(n.dom,t),u}})}function Fi(e,n){return{parent:u(cl.from(e.dom.documentElement).map(kl.fromDom).getOr(e)),view:u(e),origin:u(Ia(0,0)),isResizable:n}}function Hi(e){return It(e).exists(function(e){return La.test(e)})}function Vi(e){return It(e).exists(function(e){return _a.test(e)})}function qi(e){return It(e).isNone()}function Ui(){return{transformRow:i,transformCell:Eo}}function Gi(e,n){function t(t){if(Su(t))return Kf((u={element:t}).element)?e.colgroup(u):e.row(u);var o,u,i=(o=n(t),$f(o.element)?e.col(o):e.cell(o));return r=cl.some({item:t,replacement:i}),i}void 0===n&&(n=Tu);var r=cl.none();return{getOrInit:function(e,n){return r.fold(function(){return t(e)},function(r){return n(e,r.item)?r.replacement:t(e)})}}}function $i(e){return function(n){function t(t){var o=n.replace(t,e,"td"===e?{scope:null}:{});return r.push({item:t,sub:o}),o}var r=[];return{replaceOrInit:function(e,n){return Su(e)||$f(e)?e:(o=e,u=n,C(r,function(e){return u(e.item,o)}).fold(function(){return t(e)},function(r){return n(e,r.item)?r.sub:t(e)}));var o,u}}}}function Ki(e){return{unmerge:function(n){var t=xu(n);return t.each(function(e){return Me(n,"scope",e)}),function(){var r=e.cell({element:n,colspan:1,rowspan:1});return $e(r,"width"),$e(n,"width"),t.each(function(e){return Me(r,"scope",e)}),r}},merge:function(e){return $e(e[0],"width"),function(){var n=_e(p(e,xu));if(0===n.length)return cl.none();var t=n[0],r=["row","col"];return d(n,function(e){return e!==t&&m(r,e)})?cl.none():cl.from(t)}().fold(function(){return Ql(e[0],"scope")},function(n){return Me(e[0],"scope",n+"group")}),u(e[0])}}}function Xi(e,n,t){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}function Yi(e,n,t,r,o){function u(t){var r=e.dom.createRange();return r.setStart(n.dom,t),r.collapse(!0),r}var i=Pn(n).length,c=function(e,n,t,r){if(0===r)return 0;if(e===t)return r-1;for(var o=t,i=1;r>i;i++){var c=u(i).getBoundingClientRect(),l=Math.abs(e-c.left);if(n<=c.bottom){if(n<c.top||l>o)return i-1;o=l}}return 0}(t,r,o.right,i);return u(c)}function Ji(e,n){return n-e.left<e.right-n}function Qi(e,n,t){var r=e.dom.createRange();return r.selectNode(n.dom),r.collapse(t),r}function Zi(e,n,t){var r=e.dom.createRange();r.selectNode(n.dom);var o=Ji(r.getBoundingClientRect(),t);return(!0===o?Xt:Yt)(n).map(function(n){return Qi(e,n,o)})}function ec(e,n,t){var r=Ji(n.dom.getBoundingClientRect(),t);return cl.some(Qi(e,n,r))}function nc(e,n){var t=le(e);return"input"===t?$s.after(e):m(["br","img"],t)?0===n?$s.before(e):$s.after(e):$s.on(e,n)}function tc(e,n){var t=e.fold($s.before,nc,$s.after),r=n.fold($s.before,nc,$s.after);return Xs.relative(t,r)}function rc(e,n,t,r){var o=nc(e,n),u=nc(t,r);return Xs.relative(o,u)}function oc(e){return cl.from(e.getSelection())}function uc(e,n){oc(e).each(function(e){e.removeAllRanges(),e.addRange(n)})}function ic(e,n,t,r,o){uc(e,zi(e,n,t,r,o))}function cc(e,n){return Wi(e,n).match({ltr:function(n,t,r,o){ic(e,n,t,r,o)},rtl:function(n,t,r,o){oc(e).each(function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(n.dom,t,r.dom,o);else if(u.extend)try{c=r,l=o,(i=u).collapse(n.dom,t),i.extend(c.dom,l)}catch(u){ic(e,r,o,n,t)}else ic(e,r,o,n,t);var i,c,l})}})}function lc(e,n,t,r,o){cc(e,rc(n,t,r,o))}function ac(e,n,t){cc(e,tc(n,t))}function fc(e){if(0<e.rangeCount){var n=e.getRangeAt(0),t=e.getRangeAt(e.rangeCount-1);return cl.some(Us(kl.fromDom(n.startContainer),n.startOffset,kl.fromDom(t.endContainer),t.endOffset))}return cl.none()}function sc(e){if(null===e.anchorNode||null===e.focusNode)return fc(e);var n,t,r,o,u,i,c,l,a,f,s,m=kl.fromDom(e.anchorNode),d=kl.fromDom(e.focusNode);return n=m,t=e.anchorOffset,r=d,o=e.focusOffset,i=t,c=r,l=o,(a=de(u=n).dom.createRange()).setStart(u.dom,i),a.setEnd(c.dom,l),f=a,s=q(n,r)&&t===o,f.collapsed&&!s?cl.some(Us(m,e.anchorOffset,d,e.focusOffset)):fc(e)}function mc(e,n,t){uc(e,((t=void 0===t||t)?Pi:Ei)(e,n))}function dc(e){return oc(e).filter(function(e){return 0<e.rangeCount}).bind(sc).map(function(e){return Xs.exact(e.start,e.soffset,e.finish,e.foffset)})}function gc(e,n,t){return nm(e,n,(o=Ur,Mi(r=t,void 0).fold(function(){return Vs.none(r)},function(e){return qs(e.all,r,e.index,1,o)})));var r,o}function pc(e,n){var t=ji(e,n);return Us(kl.fromDom(t.startContainer),t.startOffset,kl.fromDom(t.endContainer),t.endOffset)}function bc(e,n){return{item:e,mode:n}}function hc(e,n,t,r){return void 0===r&&(r=qc),e.property().parent(n).map(function(e){return bc(e,r)})}function vc(e){return function(n){return 0===e.property().children(n).length}}function wc(e,n){return sm(dm,e,vc(dm),n)}function yc(e,n){return mm(dm,e,vc(dm),n)}function Cc(e){return Ie(e,"tr")}function Sc(e){return"br"===le(e)}function Tc(e,n,t,r){var o,u,i,c,l,a,f;return(Sc(n)?(o=e,(i=r).traverse(u=n).orThunk(function(){return hm(u,i.gather,o)}).map(i.relative)):(c=e,l=r,ye(a=n,f=t).filter(Sc).orThunk(function(){return ye(a,f-1).filter(Sc)}).bind(function(e){return l.traverse(e).fold(function(){return hm(e,l.gather,c).map(l.relative)},function(e){return pe(n=e).bind(function(e){var t=we(e);return bm(t,n).map(function(r){return{parent:e,children:t,element:n,index:r}})}).map(function(e){return $s.on(e.parent,e.index)});var n})}))).map(function(e){return{start:e,finish:e}})}function xc(e,n){return{left:e.left,top:e.top+n,right:e.right,bottom:e.bottom+n}}function Rc(e,n){return{left:e.left,top:e.top-n,right:e.right,bottom:e.bottom-n}}function Dc(e,n,t){return{left:e.left+n,top:e.top+t,right:e.right+n,bottom:e.bottom+t}}function Oc(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Ac(e,n){return cl.some(e.getRect(n))}function kc(e,n,t){return Fl(n)?Ac(e,n).map(Oc):Hl(n)?(r=e,o=n,(0<=(u=t)&&u<$t(o)?r.getRangedRect(o,u,o,u+1):u>0?r.getRangedRect(o,u-1,o,u):cl.none()).map(Oc)):cl.none();var r,o,u}function Ic(e,n){return Fl(n)?Ac(e,n).map(Oc):Hl(n)?e.getRangedRect(n,0,n,$t(n)).map(Oc):cl.none()}function Bc(e,n,t){return Re(function(e,n){return n(e)},De,n,Ru,void 0).fold(rl,function(n){return Ic(e,n).exists(function(e){return(n=t).left<(r=e).left||Math.abs(r.right-n.left)<1||n.left>r.right;var n,r})})}function Mc(e,n,t){var r,o=e.move(t,5),u=ym(n,e,t,o,100).getOr(o),i=u,c=n;return((r=e).point(i)>c.getInnerHeight()?cl.some(r.point(i)-c.getInnerHeight()):r.point(i)<0?cl.some(-r.point(i)):cl.none()).fold(function(){return n.situsFromPoint(u.left,e.point(u))},function(t){return n.scrollBy(0,t),n.situsFromPoint(u.left,e.point(u)-t)})}function Ec(e,n,t,r,o){return Ie(r,"td,th",n).bind(function(r){return Ie(r,"table",n).bind(function(u){return a=u,De(o,function(e){return pe(e).exists(function(e){return q(e,a)})},void 0).isSome()?(i=f=e,c=s=n,l=m=t,i.getSelection().bind(function(e){return Tc(c,e.finish,e.foffset,l).fold(function(){return cl.some(Ao(e.finish,e.foffset))},function(n){var t=i.fromSitus(n),r=pm.verify(i,e.finish,e.foffset,t.finish,t.foffset,l.failure,c);return pm.cata(r,function(e){return cl.none()},function(){return cl.none()},function(e){return cl.some(Ao(e,0))},function(e){return cl.some(Ao(e,$t(e)))})})}).bind(function(e){return Sm(f,s,e.element,e.offset,m,20).map(f.fromSitus)}).bind(function(e){return Ie(e.finish,"td,th",n).map(function(n){return{start:r,finish:n,range:e}})})):cl.none();var i,c,l,a,f,s,m})})}function Pc(e,n,t,r,o,u){return Al().browser.isIE()?cl.none():u(r,n).orThunk(function(){return Ec(e,n,t,r,o).map(function(e){var n=e.range;return rm(cl.some(um(n.start,n.soffset,n.finish,n.foffset)),!0)})})}function Nc(e,n){return Ie(e,"tr",n).bind(function(e){return Ie(e,"table",n).bind(function(t){var r=xe(t,"tr");return q(e,r[0])?sm(dm,t,function(e){return Yt(e).isSome()},n).map(function(e){var n=$t(e);return rm(cl.some(um(e,n,e,n)),!0)}):cl.none()})})}function zc(e,n){return Ie(e,"tr",n).bind(function(e){return Ie(e,"table",n).bind(function(t){var r=xe(t,"tr");return q(e,r[r.length-1])?mm(dm,t,function(e){return Xt(e).isSome()},n).map(function(e){return rm(cl.some(um(e,0,e,0)),!0)}):cl.none()})})}function Lc(e,n,t,r,o,u,i){return Ec(e,t,r,o,u).bind(function(e){return im(n,t,e.start,e.finish,i)})}function _c(e,n){return Ie(e,"td,th",n)}function Wc(e){return function(n){return n===e}}function jc(e){return e>=37&&40>=e}function Fc(e){return{elementFromPoint:function(n,t){return kl.fromPoint(kl.fromDom(e.document),n,t)},getRect:function(e){return e.dom.getBoundingClientRect()},getRangedRect:function(n,t,r,o){var u,i,c,l=Xs.exact(n,t,r,o);return c=(u=ji(e,l)).getClientRects(),0<(i=0<c.length?c[0]:u.getBoundingClientRect()).width||0<i.height?cl.some(i).map(Li):cl.none()},getSelection:function(){return dc(e).map(function(n){return pc(e,n)})},fromSitus:function(n){var t=Xs.relative(n.start,n.finish);return pc(e,t)},situsFromPoint:function(n,t){return r=n,o=t,u=kl.fromDom(e.document),Zs(u,r,o).map(function(e){return Us(kl.fromDom(e.startContainer),e.startOffset,kl.fromDom(e.endContainer),e.endOffset)}).map(function(e){return om(e.start,e.soffset,e.finish,e.foffset)});var r,o,u},clearSelection:function(){oc(e).each(function(e){return e.removeAllRanges()})},collapseSelection:function(n){void 0===n&&(n=!1),dc(e).each(function(t){return t.fold(function(e){return e.collapse(n)},function(t,r){var o=n?t:r;ac(e,o,o)},function(t,r,o,u){var i=n?t:o,c=n?r:u;lc(e,i,c,i,c)})})},setSelection:function(n){lc(e,n.start,n.soffset,n.finish,n.foffset)},setRelativeSelection:function(n,t){ac(e,n,t)},selectNode:function(n){mc(e,n,!1)},selectContents:function(n){mc(e,n)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){var n=kl.fromDom(e.document),t=void 0!==n?n.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return Ia(r,o).top},scrollBy:function(n,t){var r,o=n,u=t,i=kl.fromDom(e.document);(r=(void 0!==i?i.dom:document).defaultView)&&r.scrollBy(o,u)}}}function Hc(e,n){return{rows:e,cols:n}}function Vc(e){return!1===Hr(kl.fromDom(e.target),"ephox-snooker-resizer-bar")}function qc(e,n,t,r){return void 0===r&&(r=cm),t.sibling(e,n).map(function(e){return bc(e,r)})}function Uc(e,n,t){function r(n){Ql(n,e.selected),Ql(n,e.firstSelected),Ql(n,e.lastSelected)}function o(n){Me(n,e.selected,"1")}function u(e){i(e),t()}function i(n){b(xe(n,e.selectedSelector+","+e.firstSelectedSelector+","+e.lastSelectedSelector),r)}return{clearBeforeUpdate:i,clear:u,selectRange:function(t,r,i,c){u(t),b(r,o),Me(i,e.firstSelected,"1"),Me(c,e.lastSelected,"1"),n(r,i,c)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}function Gc(e,n,t){var r=Uc(Ka,function(n,r,u){t.targets().each(function(t){rn(r).each(function(i){var c,l,a,f=Co(e),s=rr(o,kl.fromDom(e.getDoc()),f),m=(c=t,l=s,Xo(a=ia.fromTable(i),c).map(function(e){var n,t,r=Vo(a,l,!1);return{upOrLeftCells:x(qo(r.slice(0,(n=e)[n.length-1].row+1)),function(e){return p(e.cells.slice(0,n[n.length-1].column+1),function(e){return e.element})}),downOrRightCells:x(qo(r.slice((t=e)[0].row+t[0].rowspan-1,r.length)),function(e){return p(e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length),function(e){return e.element})})}}));e.fire("TableSelectionChange",{cells:n,start:r,finish:u,otherCells:m})})})},function(){e.fire("TableSelectionClear")});return e.on("init",function(t){function u(){return v.clear(b),cl.none()}function i(e){x.on(function(n){T.clearBeforeUpdate(C),_c(e.target,S).each(function(t){Fn(n,t,S).each(function(n){var r,o,u,i=n.boxes.getOr([]);1===i.length?(r=i[0],o="false"===pf(r),u=Le(qr(e.target),r,q),o&&u&&(T.selectRange(C,i,r,r),y.selectContents(r))):1<i.length&&(T.selectRange(C,i,n.start,n.finish),y.selectContents(t))})})})}function c(n,t){!0===n.raw.shiftKey&&(t.kill&&n.kill(),t.selection.each(function(n){var t=Xs.relative(n.start,n.finish),r=ji(D,t);e.selection.setRng(r)}))}function a(e){return 0===e.button}var f,s,m,d,g,p,b,h,v,w,y,C,S,T,x,R,D=e.getWin(),O=ir(e),A=ar(e),k=(f=Fc(D),{clearstate:(y=f,C=O,S=A,T=r,x=li(),(s={clearstate:R=x.clear,mousedown:function(e){T.clear(C),_c(e.target,S).each(x.set)},mouseover:function(e){i(e)},mouseup:function(e){i(e),R()}}).clearstate),mousedown:s.mousedown,mouseover:s.mouseover,mouseup:s.mouseup}),I=(w=Fc(D),{keydown:function(e,n,t,r,o,i){var c=e.raw,a=c.which,f=!0===c.shiftKey;return Hn(b,v.selectedSelector).fold(function(){return jc(a)&&!f&&v.clearBeforeUpdate(b),km(a)&&f?l(Lc,w,b,h,Dm,r,n,v.selectRange):Am(a)&&f?l(Lc,w,b,h,Om,r,n,v.selectRange):km(a)?l(Pc,w,h,Dm,r,n,zc):Am(a)?l(Pc,w,h,Om,r,n,Nc):cl.none},function(e){function n(n){return function(){return B(n,function(n){return t=n.rows,r=n.cols,o=b,qn(e,t,r,(u=v).firstSelectedSelector,u.lastSelectedSelector).map(function(e){return u.clearBeforeUpdate(o),u.selectRange(o,e.boxes,e.start,e.finish),e.boxes});var t,r,o,u}).fold(function(){return Vn(b,v.firstSelectedSelector,v.lastSelectedSelector).map(function(e){var n=km(a)||i.isForward(a)?$s.after:$s.before;return w.setRelativeSelection($s.on(e.first,0),n(e.table)),v.clear(b),rm(cl.none(),!0)})},function(e){return cl.some(rm(cl.none(),!0))})}}return km(a)&&f?n([Hc(1,0)]):Am(a)&&f?n([Hc(-1,0)]):i.isBackward(a)&&f?n([Hc(0,-1),Hc(-1,0)]):i.isForward(a)&&f?n([Hc(0,1),Hc(1,0)]):jc(a)&&!f?u:cl.none})()},keyup:function(e,n,t,r,o){return Hn(b,v.selectedSelector).fold(function(){var u,i,c,l,a,f=e.raw,s=f.which;return!0===f.shiftKey&&jc(s)?(u=b,i=h,a=v.selectRange,q(c=n,l=r)&&t===o?cl.none():Ie(c,"td,th",i).bind(function(e){return Ie(l,"td,th",i).bind(function(n){return im(u,i,e,n,a)})})):cl.none()},cl.none)}}),M=(m=b=O,d=h=A,g=v=r,p=Fc(D),function(e,n){g.clearBeforeUpdate(m),Fn(e,n,d).each(function(e){var t=e.boxes.getOr([]);g.selectRange(m,t,e.start,e.finish),p.selectContents(n),p.collapseSelection()})});e.on("TableSelectorChange",function(e){return M(e.start,e.finish)});var E,P,N=(E=ii(kl.fromDom(O)),P=ii(0),{touchEnd:function(e){var n,t,r=kl.fromDom(e.target);"td"!==le(r)&&"th"!==le(r)||(n=E.get(),t=P.get(),q(n,r)&&e.timeStamp-t<300&&(e.preventDefault(),M(r,r))),E.set(r),P.set(e.timeStamp)}});e.on("dragstart",function(e){k.clearstate()}),e.on("mousedown",function(e){a(e)&&Vc(e)&&k.mousedown(mf(e))}),e.on("mouseover",function(e){var n;(void 0===(n=e).buttons||Mm.browser.isEdge()&&0===n.buttons||0!=(1&n.buttons))&&Vc(e)&&k.mouseover(mf(e))}),e.on("mouseup",function(e){a(e)&&Vc(e)&&k.mouseup(mf(e))}),e.on("touchend",N.touchEnd),e.on("keyup",function(n){var t,r,o,u=mf(n);u.raw.shiftKey&&jc(u.raw.which)&&(t=e.selection.getRng(),r=kl.fromDom(t.startContainer),o=kl.fromDom(t.endContainer),I.keyup(u,r,t.startOffset,o,t.endOffset).each(function(e){c(u,e)}))}),e.on("keydown",function(t){var r=mf(t);n().each(function(e){return e.hideBars()});var o=e.selection.getRng(),u=kl.fromDom(o.startContainer),i=kl.fromDom(o.endContainer),l=ct(Im,Bm)(kl.fromDom(e.selection.getStart()));I.keydown(r,u,o.startOffset,i,o.endOffset,l).each(function(e){c(r,e)}),n().each(function(e){return e.showBars()})}),e.on("NodeChange",function(){var n=e.selection;Wn(rn,[kl.fromDom(n.getStart()),kl.fromDom(n.getEnd())]).fold(function(){return r.clear(O)},o)})}),{clear:r.clear}}function $c(e,n){function t(e){return g.forall(function(n){return!n[e]})}function r(){return Xa(mr(e),ar(e)).bind(function(t){return We(rn(t),Xa(kl.fromDom(e.selection.getEnd()),ar(e)).bind(rn),function(e,r){return q(e,r)?p(t)?cl.some({element:o=t,mergable:cl.none(),unmergable:cl.none(),selection:[o]}):cl.some(gr(n,e,t)):cl.none();var o}).bind(i)})}function o(e){return rn(e.element).map(function(n){var t=ia.fromTable(n),r=y(Xo(t,e).getOr([]),function(e,n){return n.isLocked&&(e.onAny=!0,0===n.column?e.onFirst=!0:n.column+n.colspan>=t.grid.columns&&(e.onLast=!0)),e},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Qo(t,e).isSome(),unmergeable:Zo(t,e).isSome(),locked:r}})}function u(){m.set(E(r)()),g=m.get().bind(o),b(d.get(),function(e){return e()})}function c(e){return e(),d.set(d.get().concat([e])),function(){d.set(v(d.get(),function(n){return n!==e}))}}function l(e,n){return c(function(){return m.get().fold(function(){e.setDisabled(!0)},function(t){e.setDisabled(n(t))})})}function a(e,n,t){return c(function(){return m.get().fold(function(){e.setDisabled(!0),e.setActive(!1)},function(r){e.setDisabled(n(r)),e.setActive(t(r))})})}function f(e){return g.exists(function(n){return n.locked[e]})}function s(n,t){return function(r){return a(r,function(e){return p(e.element)},function(){return e.queryCommandValue(n)===t})}}var m=ii(cl.none()),d=ii([]),g=cl.none(),p=me("caption"),h=s("mceTableRowType","header"),w=s("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",u),{onSetupTable:function(e){return l(e,function(e){return!1})},onSetupCellOrRow:function(e){return l(e,function(e){return p(e.element)})},onSetupColumn:function(e){
return function(n){return l(n,function(n){return p(n.element)||f(e)})}},onSetupPasteable:function(e){return function(n){return l(n,function(n){return p(n.element)||e().isNone()})}},onSetupPasteableColumn:function(e,n){return function(t){return l(t,function(t){return p(t.element)||e().isNone()||f(n)})}},onSetupMergeable:function(e){return l(e,function(e){return t("mergeable")})},onSetupUnmergeable:function(e){return l(e,function(e){return t("unmergeable")})},resetTargets:u,onSetupTableWithCaption:function(n){return a(n,rl,function(n){return rn(n.element,ar(e)).exists(function(e){return Ae(e,"caption").isSome()})})},onSetupTableRowHeaders:h,onSetupTableColumnHeaders:w,targets:m.get}}var Kc,Xc=e("string"),Yc=e("object"),Jc=e("array"),Qc=t(null),Zc=n("boolean"),el=t(void 0),nl=n("function"),tl=n("number"),rl=u(!1),ol=u(!0),ul={fold:function(e,n){return e()},isSome:rl,isNone:ol,getOr:i,getOrThunk:s,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:i,orThunk:s,map:f,each:o,bind:f,exists:rl,forall:ol,filter:function(){return ul},toArray:function(){return[]},toString:u("none()")},il=function(e){function n(){return o}function t(n){return n(e)}var r=u(e),o={fold:function(n,t){return t(e)},isSome:ol,isNone:rl,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:n,orThunk:n,map:function(n){return il(n(e))},each:function(n){n(e)},bind:t,exists:t,forall:t,filter:function(n){return n(e)?o:ul},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},cl={some:il,none:f,from:function(e){return null==e?ul:il(e)}},ll=Array.prototype.slice,al=Array.prototype.indexOf,fl=Array.prototype.push,sl=function(){return(sl=Object.assign||function(e){for(var n,t=1,r=arguments.length;r>t;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},ml=function(e,n){return{major:e,minor:n}},dl={nu:ml,detect:function(e,n){function t(e){return Number(r.replace(o,"$"+e))}var r,o,u=String(n).toLowerCase();return 0===e.length?oe():(o=function(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.test(n))return r}}(e,r=u))?ml(t(1),t(2)):{major:0,minor:0}},unknown:oe},gl=function(e,n){return N(e,n,0)},pl=(Kc=/^\s+|\s+$/g,function(e){return e.replace(Kc,"")}),bl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,hl={browsers:u([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return z(e,"edge/")&&z(e,"chrome")&&z(e,"safari")&&z(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,bl],search:function(e){return z(e,"chrome")&&!z(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return z(e,"msie")||z(e,"trident")}},{name:"Opera",versionRegexes:[bl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:W("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:W("firefox")},{name:"Safari",versionRegexes:[bl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(z(e,"safari")||z(e,"mobile/"))&&z(e,"applewebkit")}}]),oses:u([{name:"Windows",search:W("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return z(e,"iphone")||z(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:W("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:W("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:W("linux"),versionRegexes:[]},{name:"Solaris",search:W("sunos"),versionRegexes:[]},{name:"FreeBSD",search:W("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:W("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},vl="Firefox",wl=function(){return ue({current:void 0,version:dl.unknown()})},yl=ue,Cl=(u("Edge"),u("Chrome"),u("IE"),u("Opera"),u(vl),u("Safari"),"Windows"),Sl="Android",Tl="Solaris",xl="FreeBSD",Rl="ChromeOS",Dl=function(){return ie({current:void 0,version:dl.unknown()})},Ol=ie,Al=(u(Cl),u("iOS"),u(Sl),u("Linux"),u("OSX"),u(Tl),u(xl),u(Rl),E(function(){return e=navigator.userAgent,n=cl.from(navigator.userAgentData),t=j,b=hl.browsers(),h=hl.oses(),v=n.bind(function(e){return n=b,B(e.brands,function(e){var t=e.brand.toLowerCase();return C(n,function(e){var n;return t===(null===(n=e.brand)||void 0===n?void 0:n.toLowerCase())}).map(function(n){return{current:n.name,version:dl.nu(parseInt(e.version,10),0)}})});var n}).orThunk(function(){return P(b,n=e).map(function(e){var t=dl.detect(e.versionRegexes,n);return{current:e.name,version:t}});var n}).fold(wl,yl),w=P(h,r=e).map(function(e){var n=dl.detect(e.versionRegexes,r);return{current:e.name,version:n}}).fold(Dl,Ol),{browser:v,os:w,deviceType:(i=v,c=e,l=t,a=(o=w).isiOS()&&!0===/ipad/i.test(c),f=o.isiOS()&&!a,m=(s=o.isiOS()||o.isAndroid())||l("(pointer:coarse)"),d=a||!f&&s&&l("(min-device-width:768px)"),g=f||s&&!d,p=i.isSafari()&&o.isiOS()&&!1===/safari/i.test(c),{isiPad:u(a),isiPhone:u(f),isTablet:u(d),isPhone:u(g),isTouch:u(m),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:u(p),isDesktop:u(!g&&!d&&!p)})};var e,n,t,r,o,i,c,l,a,f,s,m,d,g,p,b,h,v,w})),kl={fromHtml:function(e,n){var t=(n||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return ce(t.childNodes[0])},fromTag:function(e,n){var t=(n||document).createElement(e);return ce(t)},fromText:function(e,n){var t=(n||document).createTextNode(e);return ce(t)},fromDom:ce,fromPoint:function(e,n,t){return cl.from(e.dom.elementFromPoint(n,t)).map(ce)}},Il=F,Bl=Object.keys,Ml=Object.hasOwnProperty,El=function(e,n){var t={};return G(e,function(e,r){var o=n(e,r);t[o.k]=o.v}),t},Pl=function(e,n){return Ml.call(e,n)},Nl=["tfoot","thead","tbody","colgroup"];"undefined"!=typeof window||Function("return this;")();var zl,Ll,_l,Wl,jl,Fl=fe(1),Hl=fe(3),Vl=fe(9),ql=fe(11),Ul=nl(Element.prototype.attachShadow)&&nl(Node.prototype.getRootNode),Gl=u(Ul),$l=Ul?function(e){return kl.fromDom(e.dom.getRootNode())}:ge,Kl=function(e){return r(e.dom.shadowRoot)},Xl=function(e){var n=Hl(e)?e.dom.parentNode:e.dom;if(null==n||null===n.ownerDocument)return!1;var t,o,u,i,c,l=n.ownerDocument;return u=kl.fromDom(n),c=$l(u),(ql(i=c)&&r(i.dom.host)?cl.some(c):cl.none()).fold(function(){return l.body.contains(n)},(t=Xl,o=Ce,function(e){return t(o(e))}))},Yl=function(e){var n=e.dom.body;if(null==n)throw new Error("Body is not available yet");return kl.fromDom(n)},Jl=function(e,n){var t=[];return b(we(e),function(e){t=(t=n(e)?t.concat([e]):t).concat(Jl(e,n))}),t},Ql=function(e,n){e.dom.removeAttribute(n)},Zl=function(e,n){return Fe(e)?e.style.getPropertyValue(n):""},ea=u(10),na=u(10),ta=function(e,n,t){return x(we(e),function(e){return F(e,n)?t(e)?[e]:[]:ta(e,n,t)})},ra=function(e){return rn(e).fold(u([]),function(e){return Te(e,"colgroup")})},oa=function(e,n){return re(e.element,n,e.section,e.isNew)},ua="data-snooker-locked-cols",ia={fromTable:function(e){return wn(ln(e))},generate:wn,getAt:function(e,n,t){return cl.from(e.access[n+","+t])},findItem:function(e,n,t){var r=Ln(e,function(e){return t(n,e.element)});return 0<r.length?cl.some(r[0]):cl.none()},filterItems:Ln,justCells:function(e){return x(e.all,function(e){return e.cells})},justColumns:function(e){return Y(e.columns)},hasColumns:function(e){return 0<Bl(e.columns).length},getColumnAt:function(e,n){return cl.from(e.columns[n])}},ca=ia.fromTable,la=function(e,n){e.dom.appendChild(n.dom)},aa=function(e){var n=e.dom;null!==n.parentNode&&n.parentNode.removeChild(n)},fa=(zl=Hl,{get:function(e){if(!zl(e))throw new Error("Can only get text value of a text node");return Ll(e).getOr("")},getOption:Ll=function(e){return zl(e)?cl.from(e.dom.nodeValue):cl.none()},set:function(e,n){if(!zl(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=n}}),sa=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ma=function(e,n,t){return n.bind(function(n){return t.filter(l(e.eq,n))})},da=function(e,n,t){return 0<t.length?(r=e,o=n,u=t[0],w(t.slice(1),function(e,n){var t=o(r,n);return ma(r,e,t)},o(r,u))):cl.none();var r,o,u},ga=function(e,n,t,r){function o(e){return S(e,r).fold(function(){return e},function(n){return e.slice(0,n+1)})}void 0===r&&(r=rl);var u=[n].concat(e.up().all(n)),i=[t].concat(e.up().all(t)),c=o(u),a=o(i),f=C(c,function(n){return d(a,l(e.eq,n))});return{firstpath:c,secondpath:a,shared:f}},pa=_n(),ba=Hn,ha=St([{none:[]},{multiple:["elements"]},{single:["element"]}]),va=ha.none,wa=ha.multiple,ya=ha.single,Ca=tinymce.util.Tools.resolve("tinymce.PluginManager"),Sa=Jn("width",function(e){return e.dom.offsetWidth}),Ta=function(e){return tt(e,"content-box")},xa=function(e){return Qn()?tt(e,et(e)):Zn(e,"width",e.dom.offsetWidth)},Ra=function(e,n,t){var r=e();return C(r,n).orThunk(function(){return cl.from(r[0]).orThunk(t)}).map(function(e){return e.element})},Da=function(e){return"rtl"===Ue(e,"direction")?"rtl":"ltr"},Oa=Jn("height",function(e){var n=e.dom;return Xl(e)?n.getBoundingClientRect().height:n.offsetHeight}),Aa=function(e){return Qn()?(t=et(n=e),o=(r=n.dom).getBoundingClientRect().height||r.offsetHeight,"border-box"===t?o:nt(n,o,"top","bottom")):Zn(e,"height",e.dom.offsetHeight);var n,t,r,o},ka=function(e,n){return{left:e,top:n,translate:function(t,r){return ka(e+t,n+r)}}},Ia=ka,Ba=function(e){var n,t=e.dom,r=t.ownerDocument.body;return r===t?Ia(r.offsetLeft,r.offsetTop):Xl(e)?(n=t.getBoundingClientRect(),Ia(n.left,n.top)):Ia(0,0)},Ma={delta:i,positions:function(e){return Ct(wt,yt,e)},edge:vt},Ea=ct({delta:i,edge:pt,positions:function(e){return Ct(bt,ht,e)}},{delta:function(e){return-e},edge:gt,positions:function(e){return Ct(ht,bt,e)}}),Pa={delta:function(e,n){return Ea(n).delta(e,n)},positions:function(e,n){return Ea(n).positions(e,n)},edge:function(e){return Ea(e).edge(e)}},Na={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},za=(jl=["Infinity",(_l="[0-9]+")+"\\."+Tt(_l)+Tt(Wl="[eE][+-]?[0-9]+"),"\\."+_l+Tt(Wl),_l+Tt(Wl)].join("|"),new RegExp("^([+-]?(?:"+jl+"))(.*)$")),La=/(\d+(\.\d+)?)%/,_a=/(\d+(\.\d+)?)px|em/,Wa=me("col"),ja=u(La),Fa=me("col"),Ha=function(e){return It(e).fold(function(){return t=Vt(n=e,rt),r=u(0),{width:t,pixelWidth:t,getWidths:function(e,t){return Ft(e,n,t)},getCellDelta:r,singleColumnWidth:u([0]),minCellWidth:r,setElementWidth:o,adjustTableWidth:o,isRelative:!0,label:"none"};var n,t,r},function(n){return t=e,r=n,(null!==ja().exec(r)?qt:Ut)(t);var t,r})},Va=Ut,qa=qt,Ua=["img","br"],Ga=function(e,n){var t=function(e){for(var r=we(e),o=r.length-1;o>=0;o--){var u=r[o];if(n(u))return cl.some(u);var i=t(u);if(i.isSome())return i}return cl.none()};return t(e)},$a={scope:["row","col"]},Ka={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Xa=pr("th,td,caption"),Ya=pr("th,td"),Ja=dr,Qa=St([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Za=sl({},Qa),ef=Sr(function(e){return 0>e}),nf=Sr(ol),tf=St([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),rf=sl(sl({},tf),{from:function(e){return L(e,"%")?Rr("%",tf.percent,e):L(e,"px")?Rr("px",tf.pixels,e):tf.invalid(e)}}),of=function(e){if(0===e.length)return e;var n,t,r=w(e,function(e,n){var t=rf.from(n).fold(function(){return{value:n,remainder:0}},function(e){return n=e,{value:(t=Math.floor(n))+"px",remainder:n-t};var n,t},function(e){return{value:e+"%",remainder:0}});return{output:[t.value].concat(e.output),remainder:e.remainder+t.remainder}},{output:[],remainder:0}),o=r.output;return o.slice(0,o.length-1).concat([(n=o[o.length-1],t=Math.round(r.remainder),rf.from(n).fold(u(n),function(e){return e+t+"px"},function(e){return e+t+"%"}))])},uf=rf.from,cf=Nr(["compare","extract","mutate","sink"]),lf=Nr(["element","start","stop","destroy"]),af=Nr(["forceDrop","drop","move","delayDrop"]),ff=function(e,n,t,r){e.dom.removeEventListener(n,t,r)},sf=ol,mf=Lr,df=Vr("ephox-dragster").resolve,gf=cf({compare:function(e,n){return Ia(n.left-e.left,n.top-e.top)},extract:function(e){return cl.some(Ia(e.x,e.y))},sink:function(e,n){var t,r,o,i=(t=n,r=sl({layerClass:df("blocker")},t),Me(o=kl.fromTag("div"),"role","presentation"),qe(o,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Fr(o,df("blocker")),Fr(o,r.layerClass),{element:u(o),destroy:function(){aa(o)}}),c=_r(i.element(),"mousedown",e.forceDrop),l=_r(i.element(),"mouseup",e.drop),a=_r(i.element(),"mousemove",e.move),f=_r(i.element(),"mouseout",e.delayDrop);return lf({element:i.element,start:function(e){la(e,i.element())},stop:function(){aa(i.element())},destroy:function(){i.destroy(),l.unbind(),a.unbind(),f.unbind(),c.unbind()}})},mutate:function(e,n){e.mutate(n.left,n.top)}}),pf=function(e){return e.dom.contentEditable},bf=Vr("ephox-snooker").resolve,hf=bf("resizer-bar"),vf=bf("resizer-rows"),wf=bf("resizer-cols"),yf=bf("resizer-bar-dragging"),Cf={structure:!1,style:!0},Sf={structure:!0,style:!1},Tf={structure:!0,style:!0},xf={"border-collapse":"collapse",width:"100%"},Rf=g(5,function(e){var n=e+1+"px";return{title:n,value:n}}),Df=p(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(e){return{title:e,value:e.toLowerCase()}}),Of={border:"1"},Af="preservetable",kf=function(e){return"fixed"===ro(e)||!1===oo(e)},If=function(e){return"responsive"===ro(e)},Bf=function(e){var n=Nt(e);kr(e,cl.some(n),cl.none()),Ro(e)},Mf=function(e){var n=rt(e)+"px";kr(e,cl.some(n),cl.none()),Ro(e)},Ef=function(e){$e(e,"width");var n=tn(e);b(0<n.length?n:nn(e),function(e){$e(e,"width"),Ro(e)}),Ro(e)},Pf="bar-",Nf=function(e,n,t){return e.property().isText(n)&&0===e.property().getText(n).trim().length||e.property().isComment(n)?t(n).bind(function(n){return Nf(e,n,t).orThunk(function(){return cl.some(n)})}):cl.none()},zf=function(e,n){var t=Nf(e,n,e.query().prevSibling).getOr(n);if(e.property().isText(t))return Ao(t,ko(e,t));var r=e.property().children(t);return 0<r.length?zf(e,r[r.length-1]):Ao(t,ko(e,t))},Lf=zf,_f=_n(),Wf=me("th"),jf=function(e){var n=v(e,function(e){return Wf(e.element)});return 0===n.length?cl.some("td"):n.length===e.length?cl.some("th"):cl.none()},Ff=No,Hf=zo,Vf=Lo,qf=function(e){return{isValue:ol,isError:rl,getOr:u(e),getOrThunk:u(e),getOrDie:u(e),or:function(n){return qf(e)},orThunk:function(n){return qf(e)},fold:function(n,t){return t(e)},map:function(n){return qf(n(e))},mapError:function(n){return qf(e)},each:function(n){n(e)},bind:function(n){return n(e)},exists:function(n){return n(e)},forall:function(n){return n(e)},toOptional:function(){return cl.some(e)}}},Uf=function(e){return{isValue:rl,isError:ol,getOr:i,getOrThunk:function(e){return e()},getOrDie:function(){return n=String(e),function(){throw new Error(n)}();var n},or:i,orThunk:function(e){return e()},fold:function(n,t){return n(e)},map:function(n){return Uf(e)},mapError:function(n){return Uf(n(e))},each:o,bind:function(n){return Uf(e)},exists:rl,forall:ol,toOptional:cl.none}},Gf={value:qf,error:Uf,fromOption:function(e,n){return e.fold(function(){return Uf(n)},qf)}},$f=me("col"),Kf=me("colgroup"),Xf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Yf=_n(),Jf=Eu("thead",!0),Qf=Eu("tbody",!1),Zf=Eu("tfoot",!1),es=$i("th"),ns=$i("td"),ts=$o(function(e,n,t,r){var o=n[0].row;return Bu(w(Mu(n),function(e,n){return{grid:mu(e.grid,o,n.row+e.delta,t,r.getOrInit),delta:e.delta+1}},{grid:e,delta:0}).grid,o,n[0].column)},Xo,o,o,Gi),rs=$o(function(e,n,t,r){var o=Mu(n),u=o[o.length-1],i=u.row+u.rowspan;return Bu(w(o,function(e,n){return mu(e,i,n.row,t,r.getOrInit)},e),i,n[0].column)},Xo,o,o,Gi),os=$o(function(e,n,t,r){var o=n.details,u=Cu(o),i=u[0].column;return Bu(w(u,function(e,n){return{grid:du(e.grid,i,n.column+e.delta,t,r.getOrInit),delta:e.delta+1}},{grid:e,delta:0}).grid,o[0].row,i)},ju(!0),zu,o,Gi),us=$o(function(e,n,t,r){var o=n.details,u=o[o.length-1],i=u.column+u.colspan;return Bu(w(Cu(o),function(e,n){return du(e,i,n.column,t,r.getOrInit)},e),o[0].row,i)},ju(!1),zu,o,Gi),is=$o(function(e,n,t,r){var o,u,i=Cu(n.details),c=(o=e,u=p(i,function(e){return e.column}),x(o,function(e){var n=e.cells,t=w(u,function(e,n){return n>=0&&n<e.length?e.slice(0,n).concat(e.slice(n+1)):e},n);return 0<t.length?[re(e.element,t,e.section,e.isNew)]:[]})),l=0<c.length?c[0].cells.length-1:0;return Bu(c,i[0].row,Math.min(i[0].column,l))},function(e,n){return Yo(e,n).map(function(n){return{details:n,pixelDelta:-Wu(e,n)}})},zu,ku,Gi),cs=$o(function(e,n,t,r){var o,u,i,c,l=Mu(n),a=(o=l[0].row,u=l[l.length-1].row,c=(i=pn(e)).rows,i.cols.concat(c.slice(0,o)).concat(c.slice(u+1))),f=0<a.length?a.length-1:0;return Bu(a,Math.min(n[0].row,f),n[0].column)},Xo,o,ku,Gi),ls=$o(function(e,n,t,r){return Bu(wu(e,p(Cu(n),function(e){return e.column}),!0,t,r.replaceOrInit),n[0].row,n[0].column)},Yo,o,o,es),as=$o(function(e,n,t,r){return Bu(wu(e,p(Cu(n),function(e){return e.column}),!1,t,r.replaceOrInit),n[0].row,n[0].column)},Yo,o,o,ns),fs=$o(Jf,Yo,o,o,es),ss=$o(Qf,Yo,o,o,ns),ms=$o(Zf,Yo,o,o,ns),ds=$o(function(e,n,t,r){return Bu(yu(e,n,t,r.replaceOrInit),n[0].row,n[0].column)},Yo,o,o,es),gs=$o(function(e,n,t,r){return Bu(yu(e,n,t,r.replaceOrInit),n[0].row,n[0].column)},Yo,o,o,ns),ps=$o(function(e,n,t,r){var o=n.cells;return Ou(o),Iu(function(e,n,t){var r=pn(e).rows;if(0===r.length)return e;for(var o=n.startRow;o<=n.finishRow;o++)for(var u=n.startCol;u<=n.finishCol;u++){var i=r[o],c=mn(i,u).isLocked;sn(i,u,te(t(),!1,c))}return e}(e,n.bounds,r.merge(o)),cl.from(o[0]))},Qo,Nu,o,Ki),bs=$o(function(e,n,t,r){return Iu(w(n,function(e,n){return eu(e,n,t,r.unmerge(n))},e),cl.from(n[0]))},Zo,Nu,o,Ki),hs=$o(function(e,n,t,r){var o,u,i=(o=n.clipboard,u=n.generators,Vo(ia.fromTable(o),u,!0));return au({row:n.row,column:n.column},e,i,n.generators,t).fold(function(){return Iu(e,cl.some(n.element))},function(e){return Bu(e,n.row,n.column)})},function(e,n){return en(n.element).bind(function(t){return Uo(e,t).map(function(e){return sl(sl({},e),{generators:n.generators,clipboard:n.clipboard})})})},Nu,o,Gi),vs=$o(function(e,n,t,r){var o=pn(e).rows,u=n.cells[0].column,i=o[n.cells[0].row];return Bu(fu(u,e,Pu(n.clipboard,n.generators,i),n.generators,t),n.cells[0].row,n.cells[0].column)},Fu(!0),o,o,Gi),ws=$o(function(e,n,t,r){var o=pn(e).rows,u=n.cells[n.cells.length-1].column+n.cells[n.cells.length-1].colspan,i=o[n.cells[0].row];return Bu(fu(u,e,Pu(n.clipboard,n.generators,i),n.generators,t),n.cells[0].row,n.cells[0].column)},Fu(!1),o,o,Gi),ys=$o(function(e,n,t,r){var o=pn(e).rows,u=n.cells[0].row,i=o[u];return Bu(su(u,e,Pu(n.clipboard,n.generators,i),n.generators,t),n.cells[0].row,n.cells[0].column)},Ko,o,o,Gi),Cs=$o(function(e,n,t,r){var o=pn(e).rows,u=n.cells[n.cells.length-1].row+n.cells[n.cells.length-1].rowspan,i=o[n.cells[0].row];return Bu(su(u,e,Pu(n.clipboard,n.generators,i),n.generators,t),n.cells[0].row,n.cells[0].column)},Ko,o,o,Gi),Ss=function(e,n){var t=ia.fromTable(e);return Xo(t,n).bind(function(e){var n=e[e.length-1],r=e[0].row,o=n.row+n.rowspan;return function(){var e=p(t.all.slice(r,o),function(e){return Mo(e).type}),n=m(e,"header"),u=m(e,"footer");if(n||u){var i=m(e,"body");return!n||i||u?n||i||!u?cl.none():cl.some("footer"):cl.some("header")}return cl.some("body")}()}).getOr("")},Ts={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},xs=tinymce.util.Tools.resolve("tinymce.util.Tools"),Rs=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Ds=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Os=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,As=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,ks=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Is=function(e){return p(e,function(e){var n=e.text||e.title;return ai(e)?{text:n,items:Is(e.menu)}:{text:n,value:e.value}})},Bs=function(e,n,t,r,o){return p(t,function(t){var u,i,c,l,a=t.text||t.title;return ai(t)?{type:"nestedmenuitem",text:a,getSubmenuItems:function(){return Bs(e,n,t.menu,r,o)}}:{text:a,type:"togglemenuitem",onAction:function(){return o(t.value)},onSetup:(u=e,i=n,c=r,l=t.value,function(e){function n(){function n(e){return u.formatter.match(c,{value:l},e.dom,r)}var o=Ja(i);r?(e.setActive(!d(o,n)),t.set(u.formatter.formatChanged(c,function(n){return e.setActive(!n)},!0))):(e.setActive(R(o,n)),t.set(u.formatter.formatChanged(c,e.setActive,!1,{value:l})))}var t=ci(function(e){return e.unbind()}),r=!_(l);return u.initialized?n():u.on("init",n),t.clear})}})},Ms=function(e){return x(e,function(e){return ai(e)?[sl(sl({},e),{menu:Ms(e.menu)})]:_(e.value)?[e]:[]})},Es=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Rs}],Ps={normal:hi(!1),ifTruthy:hi(!0)},Ns=l(Ci,["left","center","right"],"align"),zs=l(Ci,["top","middle","bottom"],"valign"),Ls=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],_s=function(e,n,t,r){if("TD"===n.tagName||"TH"===n.tagName)Xc(t)?e.setStyle(n,t,r):e.setStyle(n,t);else if(n.children)for(var o=0;o<n.children.length;o++)_s(e,n.children[o],t,r)},Ws={remove_similar:!0,inherit:!1},js=sl({selector:"td,th"},Ws),Fs={tablecellbackgroundcolor:sl({styles:{backgroundColor:"%value"}},js),tablecellverticalalign:sl({styles:{"vertical-align":"%value"}},js),tablecellbordercolor:sl({styles:{borderColor:"%value"}},js),tablecellclass:sl({classes:["%value"]},js),tableclass:sl({selector:"table",classes:["%value"]},Ws),tablecellborderstyle:sl({styles:{borderStyle:"%value"}},js),tablecellborderwidth:sl({styles:{borderWidth:"%value"}},js)},Hs=St([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Vs=sl(sl({},Hs),{none:function(e){return Hs.none(e=void 0===e?void 0:e)}}),qs=function(e,n,t,r,o){void 0===o&&(o=ol);var u=1===r;if(!u&&0>=t)return Vs.first(e[0]);if(u&&t>=e.length-1)return Vs.last(e[e.length-1]);var i=t+r,c=e[i];return o(c)?Vs.middle(n,c):qs(e,n,i,r,o)},Us=function(e,n,t,r){return{start:e,soffset:n,finish:t,foffset:r}},Gs=St([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$s={before:Gs.before,on:Gs.on,after:Gs.after,cata:function(e,n,t,r){return e.fold(n,t,r)},getStart:function(e){return e.fold(i,i,i)}},Ks=St([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Xs={domRange:Ks.domRange,relative:Ks.relative,exact:Ks.exact,exactFromRange:function(e){return Ks.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){var n=e.match({domRange:function(e){return kl.fromDom(e.startContainer)},relative:function(e,n){return $s.getStart(e)},exact:function(e,n,t,r){return e}});return kl.fromDom(ge(n).dom.defaultView)},range:Us},Ys=function(e,n){return e.selectNodeContents(n.dom)},Js=St([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);Js.ltr,Js.rtl;var Qs=function(e,n,t,r){return Hl(n)?(u=n,i=t,c=r,(l=(o=e).dom.createRange()).selectNode(u.dom),B(l.getClientRects(),function(e){return Xi(e,i,c)?cl.some(e):cl.none()}).map(function(e){return Yi(o,u,i,c,e)})):(f=n,s=t,m=r,d=(a=e).dom.createRange(),B(we(f),function(e){return d.selectNode(e.dom),Xi(d.getBoundingClientRect(),s,m)?Qs(a,e,s,m):cl.none()}));var o,u,i,c,l,a,f,s,m,d},Zs=document.caretPositionFromPoint?function(e,n,t){var r,o;return cl.from(null===(o=(r=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,n,t)).bind(function(n){if(null===n.offsetNode)return cl.none();var t=e.dom.createRange();return t.setStart(n.offsetNode,n.offset),t.collapse(),cl.some(t)})}:document.caretRangeFromPoint?function(e,n,t){var r,o;return cl.from(null===(o=(r=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,n,t))}:function(e,n,t){return kl.fromPoint(e,n,t).bind(function(r){function o(){return t=e,u=n,(0===we(o=r).length?ec:Zi)(t,o,u);var t,o,u}return 0===we(r).length?o():function(e,n,t,r){var o=e.dom.createRange();o.selectNode(n.dom);var u=o.getBoundingClientRect();return function(e,n,t,r){var o=e.dom.createRange();o.selectNode(n.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,t)),c=Math.max(u.top,Math.min(u.bottom,r));return Qs(e,n,i,c)}(e,n,Math.max(u.left,Math.min(u.right,t)),Math.max(u.top,Math.min(u.bottom,r)))}(e,r,n,t).orThunk(o)})},em=tinymce.util.Tools.resolve("tinymce.util.VK"),nm=function(e,n,t){return t.fold(cl.none,cl.none,function(e,n){return Xt(n).map(function(e){function n(e,n,t,o){return zi(r,e,n,t,o)}return u=Xs.exact(e,0,e,0),t=u,r=Xs.getWin(t).dom,o=t.match({domRange:function(e){var n=kl.fromDom(e.startContainer),t=kl.fromDom(e.endContainer);return rc(n,e.startOffset,t,e.endOffset)},relative:tc,exact:rc}),Wi(r,o).match({ltr:n,rtl:n});var t,r,o,u})},function(t){return e.execCommand("mceTableInsertRowAfter"),gc(e,n,t)})},tm=["table","li","dl"],rm=function(e,n){return{selection:e,kill:n}},om=function(e,n,t,r){return{start:$s.on(e,n),finish:$s.on(t,r)}},um=om,im=function(e,n,t,r,o){return q(t,r)?cl.none():Fn(t,r,n).bind(function(n){var r=n.boxes.getOr([]);return 1<r.length?(o(e,r,n.start,n.finish),cl.some(rm(cl.some(um(t,0,t,$t(t))),!0))):cl.none()})},cm=function(e,n,t,r){void 0===r&&(r=cm);var o=e.property().children(n);return t.first(o).map(function(e){return bc(e,r)})},lm=[{current:hc,next:qc,fallback:cl.none()},{current:qc,next:cm,fallback:cl.some(hc)},{current:cm,next:cm,fallback:cl.some(qc)}],am=function(e,n,t,r,o){return C(o=void 0===o?lm:o,function(e){return e.current===t}).bind(function(t){return t.current(e,n,r,t.next).orThunk(function(){return t.fallback.bind(function(t){return am(e,n,t,r)})})})},fm=function(e,n,t,r,o,u){return am(e,n,r,o).bind(function(n){return u(n.item)?cl.none():t(n.item)?cl.some(n.item):fm(e,n.item,t,n.mode,o,u)})},sm=function(e,n,t,r){return fm(e,n,t,qc,{sibling:function(e,n){return e.query().prevSibling(n)},first:function(e){return 0<e.length?cl.some(e[e.length-1]):cl.none()}},r)},mm=function(e,n,t,r){return fm(e,n,t,qc,{sibling:function(e,n){return e.query().nextSibling(n)},first:function(e){return 0<e.length?cl.some(e[0]):cl.none()}},r)},dm=_n(),gm=St([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),pm=sl(sl({},gm),{verify:function(e,n,t,r,o,u,i){return Ie(r,"td,th",i).bind(function(t){return Ie(n,"td,th",i).map(function(n){return q(t,n)?q(r,t)&&$t(t)===o?u(n):gm.none("in same cell"):Wn(Cc,[t,n]).fold(function(){return o=t,i=(r=e).getRect(n),(c=r.getRect(o)).right>i.left&&c.left<i.right?gm.success():u(n);var r,o,i,c},function(e){return u(n)})})}).getOr(gm.none("default"))},cata:function(e,n,t,r,o){return e.fold(n,t,r,o)}}),bm=function(e,n){return S(e,l(q,n))},hm=function(e,n,t){return n(e,t).bind(function(e){return Hl(e)&&0===Pn(e).trim().length?hm(e,n,t):cl.some(e)})},vm=St([{none:[]},{retry:["caret"]}]),wm={point:function(e){return e.bottom},adjuster:function(e,n,t,r,o){var u=xc(o,5);return Math.abs(t.bottom-r.bottom)<1||t.top>o.bottom?vm.retry(u):t.top===o.bottom?vm.retry(xc(o,1)):Bc(e,n,o)?vm.retry(Dc(u,5,0)):vm.none()},move:xc,gather:yc},ym=function(e,n,t,r,o){return 0===o?cl.some(r):(i=e,c=r.left,l=n.point(r),i.elementFromPoint(c,l).filter(function(e){return"table"===le(e)}).isSome()?(u=o-1,ym(e,n,t,n.move(r,5),u)):e.situsFromPoint(r.left,n.point(r)).bind(function(u){return u.start.fold(cl.none,function(u){return Ic(e,u).bind(function(i){return n.adjuster(e,u,i,t,r).fold(cl.none,function(r){return ym(e,n,t,r,o-1)})}).orThunk(function(){return cl.some(r)})},cl.none)}));var u,i,c,l},Cm={tryUp:l(Mc,{point:function(e){return e.top},adjuster:function(e,n,t,r,o){var u=Rc(o,5);return Math.abs(t.top-r.top)<1||t.bottom<o.top?vm.retry(u):t.bottom===o.top?vm.retry(Rc(o,1)):Bc(e,n,o)?vm.retry(Dc(u,5,0)):vm.none()},move:Rc,gather:wc}),tryDown:l(Mc,wm),ieTryUp:function(e,n){return e.situsFromPoint(n.left,n.top-5)},ieTryDown:function(e,n){return e.situsFromPoint(n.left,n.bottom+5)},getJumpSize:u(5)},Sm=function(e,n,t,r,o,u){return 0===u?cl.none():Rm(e,n,t,r,o).bind(function(i){var c=e.fromSitus(i),l=pm.verify(e,t,r,c.finish,c.foffset,o.failure,n);return pm.cata(l,function(){return cl.none()},function(){return cl.some(i)},function(i){return q(t,i)&&0===r?Tm(e,t,r,Rc,o):Sm(e,n,i,0,o,u-1)},function(i){return q(t,i)&&r===$t(i)?Tm(e,t,r,xc,o):Sm(e,n,i,$t(i),o,u-1)})})},Tm=function(e,n,t,r,o){return kc(e,n,t).bind(function(n){return xm(e,o,r(n,Cm.getJumpSize()))})},xm=function(e,n,t){var r=Al().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?n.otherRetry(e,t):r.isIE()?n.ieRetry(e,t):cl.none()},Rm=function(e,n,t,r,o){return kc(e,t,r).bind(function(n){return xm(e,o,n)})},Dm={traverse:ve,gather:yc,relative:$s.before,otherRetry:Cm.tryDown,ieRetry:Cm.ieTryDown,failure:pm.failedDown},Om={traverse:he,gather:wc,relative:$s.before,otherRetry:Cm.tryUp,ieRetry:Cm.ieTryUp,failure:pm.failedUp},Am=Wc(38),km=Wc(40),Im={isBackward:Wc(37),isForward:Wc(39)},Bm={isBackward:Wc(39),isForward:Wc(37)},Mm=tinymce.util.Tools.resolve("tinymce.Env");Ca.add("table",function(e){function n(e){return Ya(mr(s)).bind(function(n){return rn(n,p).map(function(t){var r=gr(g,t,n);return e(t,r)})}).getOr("")}var t,r,o,i,c,l,a,f,s,d,g,p,b=(t=function(){return ir(e)},r=function(){return Ya(mr(e),ar(e))},o=Ka.selectedSelector,{get:function(){return ba(t(),o).fold(function(){return r().fold(va,ya)},function(e){return wa(e)})}}),h=$c(e,b),v=Oo(e),w=Gc(e,v.lazyResize,h),y=qu(e,w,v.lazyWire),C=(i=li(),c=li(),{getRows:i.get,setRows:function(e){e.fold(i.clear,i.set),c.clear()},clearRows:i.clear,getColumns:c.get,setColumns:function(e){e.fold(c.clear,c.set),i.clear()},clearColumns:c.clear});return Bi(e,y,0,b,C),d=y,g=b,p=ar(s=e),G({mceTableRowType:function(){return n(d.getTableRowType)},mceTableCellType:function(){return n(d.getTableCellType)},mceTableColType:function(){return n(d.getTableColType)}},function(e,n){return s.addQueryValueHandler(n,e)}),br(e,b,y),function(e,n,t,r){function o(n){return function(){return e.execCommand(n)}}function i(n){e.execCommand("mceInsertTable",!1,{rows:n.numRows,columns:n.numColumns})}var c={text:"Table properties",onSetup:t.onSetupTable,onAction:o("mceTableProps")},l={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:o("mceTableDelete")};e.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablepasterowbefore",{
text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),e.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)});var a={type:"nestedmenuitem",text:"Row",getSubmenuItems:u("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};e.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:t.onSetupColumn("onFirst")}),e.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:t.onSetupColumn("onLast")}),e.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),e.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")});var f={type:"nestedmenuitem",text:"Column",getSubmenuItems:u("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};e.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:t.onSetupMergeable}),e.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:t.onSetupUnmergeable});var s={type:"nestedmenuitem",text:"Cell",getSubmenuItems:u("tablecellprops tablemergecells tablesplitcells")};!1===e.getParam("table_grid",!0,"boolean")?e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:i}]}}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),e.ui.registry.addMenuItem("tableprops",c),e.ui.registry.addMenuItem("deletetable",l),e.ui.registry.addNestedMenuItem("row",a),e.ui.registry.addNestedMenuItem("column",f),e.ui.registry.addNestedMenuItem("cell",s),e.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold(u(""),function(e){return"caption"===le(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var m=Ms(po(e));0!==m.length&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Bs(e,n,m,"tableclass",function(n){return e.execCommand("mceTableToggleClass",!1,n)})},onSetup:t.onSetupTable});var d=Ms(go(e));0!==d.length&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Bs(e,n,d,"tablecellclass",function(n){return e.execCommand("mceTableCellToggleClass",!1,n)})},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Bs(e,n,Rs,"tablecellverticalalign",fi(e,"vertical-align"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Bs(e,n,uo(e),"tablecellborderwidth",fi(e,"border-width"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Bs(e,n,io(e),"tablecellborderstyle",fi(e,"border-style"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:t.onSetupTableWithCaption}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return mi(e,So(e),"background-color")},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return mi(e,To(e),"border-color")},onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:di(e),onSetup:t.onSetupTableRowHeaders}),e.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:gi(e),onSetup:t.onSetupTableColumnHeaders})}(e,b,h,C),function(e,n,t,r){function o(n){return function(){return e.execCommand(n)}}e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(e){return e("inserttable | cell row column | advtablesort | tableprops deletetable")}}),e.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),e.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),e.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),e.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),e.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),e.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)}),e.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),e.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")}),e.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});var u=Ms(po(e));0!==u.length&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:si(e,n,u,"tableclass",function(n){return e.execCommand("mceTableToggleClass",!1,n)}),onSetup:t.onSetupTable});var i=Ms(go(e));0!==i.length&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:si(e,n,i,"tablecellclass",function(n){return e.execCommand("mceTableCellToggleClass",!1,n)}),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:si(e,n,Rs,"tablecellverticalalign",fi(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:si(e,n,uo(e),"tablecellborderwidth",fi(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:si(e,n,io(e),"tablecellborderstyle",fi(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:t.onSetupTableWithCaption}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(n){return n(mi(e,So(e),"background-color"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(n){return n(mi(e,To(e),"border-color"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:di(e),onSetup:t.onSetupTableRowHeaders}),e.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:gi(e),onSetup:t.onSetupTableColumnHeaders})}(e,b,h,C),0<(f=(a=e).getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")).length&&a.ui.registry.addContextToolbar("table",{predicate:function(e){return a.dom.is(e,"table")&&a.getBody().contains(e)},items:f,scope:"node",position:"node"}),e.on("PreInit",function(){e.serializer.addTempAttr(Ka.firstSelected),e.serializer.addTempAttr(Ka.lastSelected),e.formatter.register(Fs)}),e.getParam("table_tab_navigation",!0,"boolean")&&e.on("keydown",function(n){var t,r,o,u,i=e,c=w;(t=n).keyCode===em.TAB&&(r=ir(i),o=function(e){var n=le(e);return q(e,r)||m(tm,n)},u=i.selection.getRng(),en(kl.fromDom(t.shiftKey?u.startContainer:u.endContainer),o).each(function(e){t.preventDefault(),rn(e,o).each(c.clear),i.selection.collapse(t.shiftKey),(t.shiftKey?function(e,n,t){return nm(e,n,(o=Ur,Mi(r=t,void 0).fold(function(){return Vs.none()},function(e){return qs(e.all,r,e.index,-1,o)})));var r,o}:gc)(i,o,e).each(function(e){i.selection.setRng(e)})}))}),e.on("remove",function(){v.destroy()}),{insertTable:(l=e,function(e,n,t){var r=Ku(l,n,e,t=void 0===t?{}:t,"Invalid values for insertTable - rows and columns values are required to insert a table.");return l.undoManager.add(),r}),setClipboardRows:Yu(C.setRows),getClipboardRows:Xu(C.getRows),setClipboardCols:Yu(C.setColumns),getClipboardCols:Xu(C.getColumns),resizeHandler:v,selectionTargets:h}})}();